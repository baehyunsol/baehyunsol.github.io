<!DOCTYPE html><html>

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width"/>
    
    <title>IRs-of-Rust</title>
    
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&amp;display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'"/>
    <!--<link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&amp;display=swap" rel="stylesheet"/> -->
    
    <link href="page.css" rel="stylesheet"/><link href="markdown.css" rel="stylesheet"/><link href="nav.css" rel="stylesheet"/><link href="header.css" rel="stylesheet"/>
    
</head>

<body>


    <header>
<p><div class="topmenu deactivated"><a href="index.html">Home</a> <a href="Articles.html">Articles</a> <a href="Tags.html">Tags</a></div><div class="mobileview"><a id="navbutton">&#9776;</a></div></p>
    </header>



    <nav>
<p><a id="settingsopenbutton">&#9776;</a><a href="#top">&#9650;</a><a href="#bottom">&#9660;</a></p><div id="settingsmenubg"><p></p><div id="settingsmenu"><table><thead><tr><th colspan="2"><div class="align-right"> <span class="size-giant"><a id="settingsclosebutton">&#10006;</a></span></div></th></tr></thead><tbody><tr><td><div class="align-right">Theme:</div></td><td><div class="align-left"><a id="changethemebutton">Set Light Theme</a></div></td></tr><tr><td><div class="align-right">Horizontal Padding:</div></td><td><div class="align-left"><a id="growhorizontalbutton">Grow</a> <a id="shrinkhorizontalbutton">Shrink</a></div></td></tr><tr><td><div class="align-right">Font Size:</div></td><td><div class="align-left"><a id="growfontbutton">Grow</a> <a id="shrinkfontbutton">Shrink</a></div></td></tr><tr><td><div class="align-right">Settings:</div></td><td><div class="align-left"><a id="savesettingsbutton">Save All</a> <a id="discardsettingsbutton">Discard All</a></div></td></tr></tbody></table></div></div>
    </nav>


    <article class="markdown">
        <a id="top"></a>
<div class="align-right"><p>Last Updated: 13.May.2023</p><p>Tags: <a href="tag-rust.html">#rust</a>, <a href="tag-compiler.html">#compiler</a></p></div><h1 id="irs-of-rust">IRs of Rust</h1><p>The Rust compiler is very complicated. It consists of many modules, and it takes multiple steps to translate a human-readable programming language to a machine code. Though it&apos;s not necessary for typical programmers to know the internals of the compiler, it&apos;d be very helpful if we understand how the language works. In this article, I&apos;ll take a closer look at the steps the compiler takes.</p><p><a href="https://play.rust-lang.org">Rust playground</a> is an excellent place to play around with the compiler-internals. All the IRs in this article are generated by it. I used Rust-1.71.0-nightly, which is the newest version as I write this article.</p><h2 id="steps-of-the-compilation">Steps of the compilation</h2><p>When a programmer compiles a Rust code, the code goes through below steps.</p><pre class="fenced-code-block"><code><span class="code-fence-row"><span class="code-fence-code">          Rust</span></span>
<span class="code-fence-row"><span class="code-fence-code">           |</span></span>
<span class="code-fence-row"><span class="code-fence-code">           | Lexer, Parser</span></span>
<span class="code-fence-row"><span class="code-fence-code">           V</span></span>
<span class="code-fence-row"><span class="code-fence-code">  Abstract Syntax Tree</span></span>
<span class="code-fence-row"><span class="code-fence-code">           |</span></span>
<span class="code-fence-row"><span class="code-fence-code">           | Rust Compiler</span></span>
<span class="code-fence-row"><span class="code-fence-code">           V</span></span>
<span class="code-fence-row"><span class="code-fence-code">          HIR</span></span>
<span class="code-fence-row"><span class="code-fence-code">           |</span></span>
<span class="code-fence-row"><span class="code-fence-code">           | Rust Compiler</span></span>
<span class="code-fence-row"><span class="code-fence-code">           V</span></span>
<span class="code-fence-row"><span class="code-fence-code">          MIR</span></span>
<span class="code-fence-row"><span class="code-fence-code">           |</span></span>
<span class="code-fence-row"><span class="code-fence-code">           | Rust Compiler</span></span>
<span class="code-fence-row"><span class="code-fence-code">           V</span></span>
<span class="code-fence-row"><span class="code-fence-code">        LLVM IR</span></span>
<span class="code-fence-row"><span class="code-fence-code">           |</span></span>
<span class="code-fence-row"><span class="code-fence-code">           | LLVM</span></span>
<span class="code-fence-row"><span class="code-fence-code">           V</span></span>
<span class="code-fence-row"><span class="code-fence-code">      Machine Code</span></span>
</code></pre><p>First, a <a href="https://en.wikipedia.org/wiki/Lexical_analysis">lexer</a> translates a human-readable code to machine-friendly tokens. The tokens are then translated to <a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree">AST</a> by a <a href="https://en.wikipedia.org/wiki/Parsing#Parser">parser</a>. Lexing, parsing and AST are not Rust-specific concepts, so I won&apos;t discuss them in this article. If you want to know about them, please refer to the wikipedia links in the article.</p><p>The AST is translated to HIR, High-level Intermediate Representation. According to the <a href="https://rustc-dev-guide.rust-lang.org/overview.html">documentation</a>, HIR is a compiler-friendly AST. It resembles the syntax of Rust very closely, except that it&apos;s simplified. HIR is lowered to THIR, Typed High-level Intermediate Representation before converted to MIR. HIR is still quite readable to human. You&apos;ll see that in later sections.</p><p>The next step is MIR, Mid-level Intermediate Representation. It&apos;s a very simplified form. Many optimizations and safety checks are done in this stage. There are <a href="https://blog.rust-lang.org/2016/04/19/MIR.html">blog post</a> and <a href="https://rustc-dev-guide.rust-lang.org/mir/index.html">documents</a> explaining the details of MIR; you&apos;d probably enjoy it.</p><p>After the compiler does Rust-specific analysis and optimizations on MIR, it&apos;s passed to LLVM. From here, everything is up to LLVM, which we&apos;re not interested in.</p><p>Most information in this section is from <a href="https://rustc-dev-guide.rust-lang.org/overview.html">Rust Compiler Overview</a>. Please refer to the document if you want to know more about the compiler.</p><div class="box"><p>Table of contents</p><p>Since this article contains very long lines of code, I provide you a Toc here.</p><p><div class="toc"><ul class="no-bullet-list"><li><a href="#irs-of-rust">1.</a> IRs of Rust<ul class="no-bullet-list"><li><a href="#steps-of-the-compilation">1.1.</a> Steps of the compilation</li><li><a href="#hir">1.2.</a> HIR</li><li><a href="#mir">1.3.</a> MIR<ul class="no-bullet-list"><li><a href="#example-1-push-an-element-to-a-vector">1.3.1.</a> Example 1: Push an element to a vector</li><li><a href="#example-2-adder">1.3.2.</a> Example 2: Adder</li><li><a href="#example-3-hello-world">1.3.3.</a> Example 3: Hello World</li><li><a href="#example-4-drop-elaboration">1.3.4.</a> Example 4: Drop Elaboration</li><li><a href="#terminators">1.3.5.</a> Terminators</li><li><a href="#appendix-implementation-of-mir">1.3.6.</a> Appendix: implementation of MIR</li></ul></li></ul></li></ul></div></p></div><h2 id="hir">HIR</h2><p>There isn&apos;t much change in HIR compared to the original code. Let&apos;s see how the compiler translates the fizz-buzz code below to HIR.</p><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code">    <span class="color-violet">for</span><span class="color-white"> i in </span><span class="color-gold">1</span><span class="color-white">..</span><span class="color-gold">200 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code">        <span class="color-violet">if</span><span class="color-white"> i % </span><span class="color-gold">15 </span><span class="color-white">== </span><span class="color-gold">0 </span><span class="color-white">{ println!(&quot;</span><span class="color-green">fizzbuzz</span><span class="color-white">&quot;); }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">        <span class="color-violet">else if</span><span class="color-white"> i % </span><span class="color-gold">3 </span><span class="color-white">== </span><span class="color-gold">0 </span><span class="color-white">{ println!(&quot;</span><span class="color-green">fizz</span><span class="color-white">&quot;); }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code">        <span class="color-violet">else if</span><span class="color-white"> i % </span><span class="color-gold">5 </span><span class="color-white">== </span><span class="color-gold">0 </span><span class="color-white">{ println!(&quot;</span><span class="color-green">buzz</span><span class="color-white">&quot;); }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code">        <span class="color-violet">else </span><span class="color-white">{ println!(&quot;</span><span class="color-gold">{i}</span><span class="color-white">&quot;); }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(1)" class="copy-fenced-code">Copy</button></pre><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-white">#[</span><span class="color-red">prelude_import</span><span class="color-white">]</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-violet">use </span><span class="color-white">std::prelude::rust_2021::*;</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">#[</span><span class="color-red">macro_use</span><span class="color-white">]</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-violet">extern crate</span><span class="color-white"> std;</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">    {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code">        <span class="color-violet">let</span><span class="color-white"> _t = </span><span class="color-violet">match </span><span class="color-white">#[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">into_iter</span><span class="color-white">&quot;](#[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">Range</span><span class="color-white">&quot;]{ start: </span><span class="color-gold">1</span><span class="color-white">, end: </span><span class="color-gold">200</span><span class="color-white">, }) {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">            <span class="color-violet">mut</span><span class="color-white"> iter =&gt; </span><span class="color-violet">loop </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code">                <span class="color-violet">match </span><span class="color-white">#[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">next</span><span class="color-white">&quot;](&amp;</span><span class="color-violet">mut</span><span class="color-white"> iter) {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-white">                    #[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">None</span><span class="color-white">&quot;] {} =&gt; </span><span class="color-violet">break</span><span class="color-white">,</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-white">                    #[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">Some</span><span class="color-white">&quot;] {  </span><span class="color-gold">0</span><span class="color-white">: i } =&gt; {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code">                        <span class="color-violet">if</span><span class="color-white"> i % </span><span class="color-gold">15 </span><span class="color-white">== </span><span class="color-gold">0 </span><span class="color-white">{ {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"><span class="color-white">                            ::std::io::_print(&lt;#[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">format_arguments</span><span class="color-white">&quot;]&gt;::new_const(&amp;[&quot;</span><span class="color-green">fizzbuzz</span><span class="color-emerald">\n</span><span class="color-white">&quot;]));</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code"><span class="color-white">                        }; }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code">                        <span class="color-violet">else if</span><span class="color-white"> i % </span><span class="color-gold">3 </span><span class="color-white">== </span><span class="color-gold">0 </span><span class="color-white">{ {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code"><span class="color-white">                            ::std::io::_print(&lt;#[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">format_arguments</span><span class="color-white">&quot;]&gt;::new_const(&amp;[&quot;</span><span class="color-green">fizz</span><span class="color-emerald">\n</span><span class="color-white">&quot;]));</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code"><span class="color-white">                        }; }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code">                        <span class="color-violet">else if</span><span class="color-white"> i % </span><span class="color-gold">5 </span><span class="color-white">== </span><span class="color-gold">0 </span><span class="color-white">{ {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code"><span class="color-white">                            ::std::io::_print(&lt;#[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">format_arguments</span><span class="color-white">&quot;]&gt;::new_const(&amp;[&quot;</span><span class="color-green">buzz</span><span class="color-emerald">\n</span><span class="color-white">&quot;]));</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">22</span><span class="code-fence-code"><span class="color-white">                        }; }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">23</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">24</span><span class="code-fence-code">                        <span class="color-violet">else </span><span class="color-white">{ {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">25</span><span class="code-fence-code"><span class="color-white">                            ::std::io::_print(</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">26</span><span class="code-fence-code"><span class="color-white">                                &lt;#[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">format_arguments</span><span class="color-white">&quot;]&gt;::new_v1(</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">27</span><span class="code-fence-code"><span class="color-white">                                    &amp;[&quot;&quot;, &quot;</span><span class="color-emerald">\n</span><span class="color-white">&quot;],</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">28</span><span class="code-fence-code"><span class="color-white">                                    &amp;[&lt;#[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">format_argument</span><span class="color-white">&quot;]&gt;::new_display(&amp;i)])</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">29</span><span class="code-fence-code"><span class="color-white">                                );</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">30</span><span class="code-fence-code"><span class="color-white">                        }; }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">31</span><span class="code-fence-code"><span class="color-white">                    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">32</span><span class="code-fence-code"><span class="color-white">                }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">33</span><span class="code-fence-code"><span class="color-white">            },</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">34</span><span class="code-fence-code"><span class="color-white">        };</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">35</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">36</span><span class="code-fence-code"><span class="color-white">        _t</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">37</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">38</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(2)" class="copy-fenced-code">Copy</button></pre><p>I ran the compiler in release mode, but the debug mode outputs the same HIR because it doesn&apos;t optimize when generating HIR.</p><p>The first change we notice is an import of preludes. It includes very frequently used names. You can see the exhaustive list of the preludes <a href="https://doc.rust-lang.org/stable/std/prelude/index.html">here</a>. Then, you can see tons of <code class="inline-code-span">#[lang = &quot;XXX&quot;]</code> macros. It looks scary at first, but they are just shortcuts for long names. For example, <code class="inline-code-span">#[lang = &quot;Some&quot;]</code> refers to <code class="inline-code-span">Option::Some&lt;T&gt;</code> defined in the std library. Possible variants of the macro is defined <a href="https://github.com/rust-lang/rust/blob/master/compiler/rustc_hir/src/lang_items.rs">here</a><span id="tooltip-container-0" class="tooltip-container"><span id="footnote-ref-0" class="footnote-ref"><a href="#footnote-cite-0">[0]</a></span><span id="tooltip-message-0" class="tooltip-message">I didn&apos;t include the line number, cause it may change over time.</span></span>. The table is defined at the end of the code. I have no idea why they use such macro, but let&apos;s not get scared. With that in mind, we can understand the above code like below:</p><ol type="1"><li><code class="inline-code-span">1..200</code> is translated to <code class="inline-code-span">Range { start: 1, end: 200 }.into_iter()</code>.</li><li><code class="inline-code-span">Range { start: 1, end: 200 }.into_iter()</code> is assigned to <code class="inline-code-span">iter</code>.</li><li>It turns <code class="inline-code-span">for</code> into <code class="inline-code-span">loop</code>. In each loop, it matches <code class="inline-code-span">iter.next()</code></li><li>If <code class="inline-code-span">iter.next()</code> is <code class="inline-code-span">None</code>, it breaks.</li><li>If <code class="inline-code-span">iter.next()</code> is <code class="inline-code-span">Some(i)</code>, it runs the fizz-buzz code.</li><li><code class="inline-code-span">println!</code> is converted to <code class="inline-code-span">::std::io::_print</code>. You can see the definition of <code class="inline-code-span">_print</code> <a href="https://github.com/rust-lang/rust/blob/master/library/std/src/io/stdio.rs">here</a><span id="tooltip-container-1" class="tooltip-container"><span id="footnote-ref-1" class="footnote-ref"><a href="#footnote-cite-0">[1]</a></span><span id="tooltip-message-1" class="tooltip-message">I didn&apos;t include the line number, cause it may change over time.</span></span>.</li></ol><h2 id="mir">MIR</h2><h3 id="example-1-push-an-element-to-a-vector">Example 1: Push an element to a vector</h3><p>I tried MIR with the fizz-buzz code above, but it was too long. I don&apos;t want you guys to suffer scrolling the endless code, so I&apos;ll use shorter code.</p><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code">    <span class="color-violet">let mut</span><span class="color-white"> a = vec![</span><span class="color-gold">1</span><span class="color-white">, </span><span class="color-gold">2</span><span class="color-white">, </span><span class="color-gold">3</span><span class="color-white">, </span><span class="color-gold">4</span><span class="color-white">];</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">    a.</span><span class="color-emerald">push</span><span class="color-white">(</span><span class="color-gold">5</span><span class="color-white">);</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(3)" class="copy-fenced-code">Copy</button></pre><p>Only 2 lines. I want to see how vector initializaion and push operation are expressed in MIR. Before looking at the MIR, looking at the HIR would be helpful.</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-white">#[</span><span class="color-red">prelude_import</span><span class="color-white">]</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-violet">use </span><span class="color-white">std::prelude::rust_2021::*;</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">#[</span><span class="color-red">macro_use</span><span class="color-white">]</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-violet">extern crate</span><span class="color-white"> std;</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code">    <span class="color-violet">let mut</span><span class="color-white"> a = &lt;[_]&gt;::into_vec(</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-white">        #[</span><span class="color-red">rustc_box</span><span class="color-white">] ::alloc::boxed::Box::new([</span><span class="color-gold">1</span><span class="color-white">, </span><span class="color-gold">2</span><span class="color-white">, </span><span class="color-gold">3</span><span class="color-white">, </span><span class="color-gold">4</span><span class="color-white">])</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-white">    );</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-white">    a.</span><span class="color-emerald">push</span><span class="color-white">(</span><span class="color-gold">5</span><span class="color-white">);</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(4)" class="copy-fenced-code">Copy</button></pre><p>It turns <code class="inline-code-span">vec!</code> into <code class="inline-code-span">into_vec(Box::new())</code>. See the documents of <a href="https://doc.rust-lang.org/stable/std/boxed/index.html">Box</a> and <a href="https://github.com/rust-lang/rust/blob/master/library/alloc/src/slice.rs">into_vec</a><span id="tooltip-container-2" class="tooltip-container"><span id="footnote-ref-2" class="footnote-ref"><a href="#footnote-cite-0">[2]</a></span><span id="tooltip-message-2" class="tooltip-message">I didn&apos;t include the line number, cause it may change over time.</span></span> if you wanna know further.</p><p>Below is the MIR of the above code, generated in Debug mode.</p><p><a id="mirex1"></a></p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gray">// WARNING: This output format is intended for human consumers only</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gray">// and is subject to change without notice. Knock yourself out.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() -&gt; () {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_0</span><span class="color-white">: ();                      </span><span class="color-gray">// return place in scope 0 at src/main.rs:1:11: 1:11</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_1</span><span class="color-white">: std::vec::Vec&lt;</span><span class="color-violet">i32</span><span class="color-white">&gt;;      </span><span class="color-gray">// in scope 0 at src/main.rs:2:9: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_2</span><span class="color-white">: std::boxed::Box&lt;[</span><span class="color-violet">i32</span><span class="color-white">]&gt;;  </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_3</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                   </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_4</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                   </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_5</span><span class="color-white">: *</span><span class="color-violet">mut u8</span><span class="color-white">;                 </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_6</span><span class="color-white">: std::boxed::Box&lt;[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]&gt;; </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code">    <span class="color-violet">let </span><span class="color-gold">_7</span><span class="color-white">: ();                          </span><span class="color-gray">// in scope 0 at src/main.rs:3:5: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_8</span><span class="color-white">: &amp;</span><span class="color-violet">mut </span><span class="color-white">std::vec::Vec&lt;</span><span class="color-violet">i32</span><span class="color-white">&gt;; </span><span class="color-gray">// in scope 0 at src/main.rs:3:5: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_9</span><span class="color-white">: *</span><span class="color-violet">const </span><span class="color-white">[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">];         </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_10</span><span class="color-white">: *</span><span class="color-violet">const </span><span class="color-white">();              </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_11</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                  </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_12</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                  </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_13</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                  </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_14</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                  </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_15</span><span class="color-white">: </span><span class="color-violet">bool</span><span class="color-white">;                   </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code"><span class="color-white">    scope </span><span class="color-gold">1 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code"><span class="color-white">        debug a =&gt; </span><span class="color-gold">_1</span><span class="color-white">;                   </span><span class="color-gray">// in scope 1 at src/main.rs:2:9: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">22</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">23</span><span class="code-fence-code"><span class="color-white">    scope </span><span class="color-gold">2 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">24</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">25</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">26</span><span class="code-fence-code"><span class="color-white">    bb0: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">27</span><span class="code-fence-code">        <span class="color-gold">_3 </span><span class="color-white">= SizeOf([</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]);           </span><span class="color-gray">// scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">28</span><span class="code-fence-code">        <span class="color-gold">_4 </span><span class="color-white">= AlignOf([</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]);          </span><span class="color-gray">// scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">29</span><span class="code-fence-code">        <span class="color-gold">_5 </span><span class="color-white">= alloc::alloc::exchange_malloc(</span><span class="color-violet">move </span><span class="color-gold">_3</span><span class="color-white">, </span><span class="color-violet">move </span><span class="color-gold">_4</span><span class="color-white">) -&gt; bb1; </span><span class="color-gray">// scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">30</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">31</span><span class="code-fence-code">                                         <span class="color-gray">// + span: /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">32</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: unsafe fn(usize, usize) -&gt; *mut u8 {alloc::alloc::exchange_malloc}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">33</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">34</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">35</span><span class="code-fence-code"><span class="color-white">    bb1: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">36</span><span class="code-fence-code">        <span class="color-gold">_6 </span><span class="color-white">= ShallowInitBox(</span><span class="color-violet">move </span><span class="color-gold">_5</span><span class="color-white">, [</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]); </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">37</span><span class="code-fence-code">        <span class="color-gold">_9 </span><span class="color-white">= (((</span><span class="color-gold">_6</span><span class="color-white">.</span><span class="color-gold">0</span><span class="color-white">: std::ptr::Unique&lt;[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]&gt;).</span><span class="color-gold">0</span><span class="color-white">: std::ptr::NonNull&lt;[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]&gt;).</span><span class="color-gold">0</span><span class="color-white">: *</span><span class="color-violet">const </span><span class="color-white">[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]); </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">38</span><span class="code-fence-code">        <span class="color-gold">_10 </span><span class="color-white">= </span><span class="color-gold">_9 </span><span class="color-white">as *</span><span class="color-violet">const </span><span class="color-white">() (PtrToPtr); </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">39</span><span class="code-fence-code">        <span class="color-gold">_11 </span><span class="color-white">= </span><span class="color-gold">_10 </span><span class="color-white">as </span><span class="color-violet">usize </span><span class="color-white">(Transmute);  </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">40</span><span class="code-fence-code">        <span class="color-gold">_12 </span><span class="color-white">= AlignOf(</span><span class="color-violet">i32</span><span class="color-white">);              </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">41</span><span class="code-fence-code">        <span class="color-gold">_13 </span><span class="color-white">= Sub(</span><span class="color-gold">_12</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">usize</span><span class="color-white">);   </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">42</span><span class="code-fence-code">        <span class="color-gold">_14 </span><span class="color-white">= BitAnd(</span><span class="color-gold">_11</span><span class="color-white">, </span><span class="color-gold">_13</span><span class="color-white">);          </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">43</span><span class="code-fence-code">        <span class="color-gold">_15 </span><span class="color-white">= Eq(</span><span class="color-gold">_14</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">0_</span><span class="color-violet">usize</span><span class="color-white">);    </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">44</span><span class="code-fence-code">        <span class="color-emerald">assert</span><span class="color-white">(</span><span class="color-gold">_15</span><span class="color-white">, &quot;</span><span class="color-green">misaligned pointer dereference: address must be a multiple of {} but is {}</span><span class="color-white">&quot;, </span><span class="color-gold">_12</span><span class="color-white">, </span><span class="color-gold">_11</span><span class="color-white">) -&gt; [success: bb7, unwind terminate]; </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">45</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">46</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">47</span><span class="code-fence-code"><span class="color-white">    bb2: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">48</span><span class="code-fence-code">        <span class="color-gold">_8 </span><span class="color-white">= &amp;</span><span class="color-violet">mut </span><span class="color-gold">_1</span><span class="color-white">;                    </span><span class="color-gray">// scope 1 at src/main.rs:3:5: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">49</span><span class="code-fence-code">        <span class="color-gold">_7 </span><span class="color-white">= Vec::&lt;</span><span class="color-violet">i32</span><span class="color-white">&gt;::push(</span><span class="color-violet">move </span><span class="color-gold">_8</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">5_</span><span class="color-violet">i32</span><span class="color-white">) -&gt; [</span><span class="color-violet">return</span><span class="color-white">: bb3, unwind: bb5]; </span><span class="color-gray">// scope 1 at src/main.rs:3:5: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">50</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">51</span><span class="code-fence-code">                                         <span class="color-gray">// + span: src/main.rs:3:7: 3:11</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">52</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: for&lt;&apos;a&gt; fn(&amp;&apos;a mut Vec&lt;i32&gt;, i32) {Vec::&lt;i32&gt;::push}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">53</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">54</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">55</span><span class="code-fence-code"><span class="color-white">    bb3: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">56</span><span class="code-fence-code">        <span class="color-emerald">drop</span><span class="color-white">(</span><span class="color-gold">_1</span><span class="color-white">) -&gt; bb4;                 </span><span class="color-gray">// scope 0 at src/main.rs:4:1: 4:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">57</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">58</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">59</span><span class="code-fence-code"><span class="color-white">    bb4: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">60</span><span class="code-fence-code">        <span class="color-violet">return</span><span class="color-white">;                          </span><span class="color-gray">// scope 0 at src/main.rs:4:2: 4:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">61</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">62</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">63</span><span class="code-fence-code"><span class="color-white">    bb5 (cleanup): {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">64</span><span class="code-fence-code">        <span class="color-emerald">drop</span><span class="color-white">(</span><span class="color-gold">_1</span><span class="color-white">) -&gt; [</span><span class="color-violet">return</span><span class="color-white">: bb6, unwind terminate]; </span><span class="color-gray">// scope 0 at src/main.rs:4:1: 4:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">65</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">66</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">67</span><span class="code-fence-code"><span class="color-white">    bb6 (cleanup): {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">68</span><span class="code-fence-code"><span class="color-white">        resume;                          </span><span class="color-gray">// scope 0 at src/main.rs:1:1: 4:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">69</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">70</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">71</span><span class="code-fence-code"><span class="color-white">    bb7: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">72</span><span class="code-fence-code"><span class="color-white">        (*</span><span class="color-gold">_9</span><span class="color-white">) = [</span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">2_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">3_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">4_</span><span class="color-violet">i32</span><span class="color-white">]; </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">73</span><span class="code-fence-code">        <span class="color-gold">_2 </span><span class="color-white">= </span><span class="color-violet">move </span><span class="color-gold">_6 </span><span class="color-white">as std::boxed::Box&lt;[</span><span class="color-violet">i32</span><span class="color-white">]&gt; (Pointer(Unsize)); </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">74</span><span class="code-fence-code">        <span class="color-gold">_1 </span><span class="color-white">= slice::&lt;impl [</span><span class="color-violet">i32</span><span class="color-white">]&gt;::into_vec::&lt;std::alloc::Global&gt;(</span><span class="color-violet">move </span><span class="color-gold">_2</span><span class="color-white">) -&gt; bb2; </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:50:36: 55:10</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">75</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">76</span><span class="code-fence-code">                                         <span class="color-gray">// + span: /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:50:36: 50:51</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">77</span><span class="code-fence-code">                                         <span class="color-gray">// + user_ty: UserType(0)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">78</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: fn(Box&lt;[i32]&gt;) -&gt; Vec&lt;i32&gt; {slice::&lt;impl [i32]&gt;::into_vec::&lt;std::alloc::Global&gt;}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">79</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">80</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(5)" class="copy-fenced-code">Copy</button></pre><p>A function in MIR consists of locals, scopes and basic blocks.</p><p>Locals are values stored on the stack, such as function arguments, local variables and temporary variables. They&apos;re underscored numbers. <code class="inline-code-span">_0</code> is the return value of the function. In our code, <code class="inline-code-span">_0</code> is <code class="inline-code-span">()</code> because the main function doesn&apos;t return anything. <code class="inline-code-span">a</code> in Rust is assigned to <code class="inline-code-span">_1</code> in MIR. <code class="inline-code-span">_2</code> through <code class="inline-code-span">_6</code> are temporary variables used by the <code class="inline-code-span">vec!</code> macro. <code class="inline-code-span">_7</code> is the return value of <code class="inline-code-span">.push</code> method. Since it returns nothing, <code class="inline-code-span">_7</code>&apos;s type is <code class="inline-code-span">()</code>.</p><p>After locals, there are scopes. They represent lexical scopes. They also contains debug information, which you can see in <code class="inline-code-span">scope 1</code> above. It says <code class="inline-code-span">a</code> is the name of <code class="inline-code-span">_1</code>. Scopes include all the debug information of user-defined variables.</p><p>Then you see basic blocks. They represent the control flow of the code. The flow starts at <code class="inline-code-span">bb0</code>, which stands for <em>basic block 0</em>. Each basic block contains one or more statements. The last statement is called terminator. The terminator tells which block to execute next. We call the next block <em>successor</em>. A block may have more than one successor.</p><p><code class="inline-code-span">bb0</code> allocates memory for <code class="inline-code-span">a</code> using <a href="https://github.com/rust-lang/rust/blob/master/library/alloc/src/alloc.rs">exchange_malloc</a><span id="tooltip-container-3" class="tooltip-container"><span id="footnote-ref-3" class="footnote-ref"><a href="#footnote-cite-0">[3]</a></span><span id="tooltip-message-3" class="tooltip-message">I didn&apos;t include the line number, cause it may change over time.</span></span> and stores the pointer at <code class="inline-code-span">_5</code>. <code class="inline-code-span">-&gt; bb1</code> after the terminator means it should go to <code class="inline-code-span">bb1</code> after executing <code class="inline-code-span">bb0</code>.</p><p><code class="inline-code-span">bb1</code> initializes a <code class="inline-code-span">Box</code> pointer using the pointer from the previous block and checks whether the pointer is well aligned. If so, it goes to <code class="inline-code-span">bb7</code>. Otherwise, it terminates. The two successors are in squared brackets after the terminator.</p><p><code class="inline-code-span">bb7</code> initializes the vector, and <code class="inline-code-span">bb2</code> pushes an element. After everything is done, the runtime calls the destructor of the vector by dropping it, then terminates.</p><p>Most statements in basic blocks are assignments of an <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.Rvalue.html">RValue</a> to a <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Place.html">Place</a>. A <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Place.html">Place</a> is a location in memory. It consists of a local and <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.ProjectionElem.html">Projection</a>s. A projection can be a deref, index, field, .. etc. Anything that comes at the right-hand side of <code class="inline-code-span">=</code> can be an <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.Rvalue.html">RValue</a>. Note that it only defines simple forms. For complex operations like <code class="inline-code-span">*_2 + *_3 + *_4</code>, it uses multiple statements and temporary variables.</p><p>Let&apos;s look at <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.Rvalue.html">RValue</a> more closely. One of the most frequently used variant is <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.Rvalue.html#variant.BinaryOp">BinaryOp</a>. You&apos;ll see it throughout this article. You already saw them at line 41 and 43 above. The variant consists of a <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.BinOp.html">BinOp</a> and two <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.Operand.html">Operand</a>s. The <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.BinOp.html">BinOp</a> enum defines primitive arithmetic operators including add, sub, mul and div. The <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.Operand.html">Operand</a> enum is literally an operand of all the operations of <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.Rvalue.html">RValue</a>. There are 3 kinds of <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.Operand.html">Operand</a>s: Copy, Move and Constant. Copy and Move represents the copy semantics and the move semantics of Rust. All the <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Place.html">Place</a>s appear in <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.Rvalue.html">RValue</a> must be either copy, move or constant. You can see that many operands in the above MIR are prefixed with <code class="inline-code-span">const</code> or <code class="inline-code-span">move</code>. Operands without any prefix are copied ones. For example, the first operand of line 41 (<code class="inline-code-span">_12</code>) is copied and the second one (<code class="inline-code-span">const 1_usize</code>) is a constant.</p><p><br/></p><p>What if we run the same code in release mode?</p><p><a id="mirex2"></a></p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gray">// WARNING: This output format is intended for human consumers only</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gray">// and is subject to change without notice. Knock yourself out.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() -&gt; () {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_0</span><span class="color-white">: ();                      </span><span class="color-gray">// return place in scope 0 at src/main.rs:1:11: 1:11</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_1</span><span class="color-white">: std::vec::Vec&lt;</span><span class="color-violet">i32</span><span class="color-white">&gt;;      </span><span class="color-gray">// in scope 0 at src/main.rs:2:9: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_2</span><span class="color-white">: std::boxed::Box&lt;[</span><span class="color-violet">i32</span><span class="color-white">]&gt;;  </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_3</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                   </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_4</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                   </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_5</span><span class="color-white">: *</span><span class="color-violet">mut u8</span><span class="color-white">;                 </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_6</span><span class="color-white">: std::boxed::Box&lt;[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]&gt;; </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code">    <span class="color-violet">let </span><span class="color-gold">_7</span><span class="color-white">: ();                          </span><span class="color-gray">// in scope 0 at src/main.rs:3:5: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_8</span><span class="color-white">: &amp;</span><span class="color-violet">mut </span><span class="color-white">std::vec::Vec&lt;</span><span class="color-violet">i32</span><span class="color-white">&gt;; </span><span class="color-gray">// in scope 0 at src/main.rs:3:5: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_9</span><span class="color-white">: *</span><span class="color-violet">const </span><span class="color-white">[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">];         </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code"><span class="color-white">    scope </span><span class="color-gold">1 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code"><span class="color-white">        debug a =&gt; </span><span class="color-gold">_1</span><span class="color-white">;                   </span><span class="color-gray">// in scope 1 at src/main.rs:2:9: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code"><span class="color-white">    scope </span><span class="color-gold">2 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code"><span class="color-white">    scope </span><span class="color-gold">3 </span><span class="color-white">(inlined slice::&lt;impl [</span><span class="color-violet">i32</span><span class="color-white">]&gt;::into_vec::&lt;std::alloc::Global&gt;) { </span><span class="color-gray">// at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:50:36: 55:10</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code"><span class="color-white">        debug </span><span class="color-red">self </span><span class="color-white">=&gt; </span><span class="color-gold">_2</span><span class="color-white">;                </span><span class="color-gray">// in scope 3 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/slice.rs:461:35: 461:39</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">22</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">23</span><span class="code-fence-code"><span class="color-white">    bb0: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">24</span><span class="code-fence-code"><span class="color-white">        StorageLive(</span><span class="color-gold">_1</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at src/main.rs:2:9: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">25</span><span class="code-fence-code"><span class="color-white">        StorageLive(</span><span class="color-gold">_2</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">26</span><span class="code-fence-code">        <span class="color-gold">_3 </span><span class="color-white">= </span><span class="color-violet">const </span><span class="color-gold">16_</span><span class="color-violet">usize</span><span class="color-white">;             </span><span class="color-gray">// scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">27</span><span class="code-fence-code">        <span class="color-gold">_4 </span><span class="color-white">= </span><span class="color-violet">const </span><span class="color-gold">4_</span><span class="color-violet">usize</span><span class="color-white">;              </span><span class="color-gray">// scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">28</span><span class="code-fence-code">        <span class="color-gold">_5 </span><span class="color-white">= alloc::alloc::exchange_malloc(</span><span class="color-violet">move </span><span class="color-gold">_3</span><span class="color-white">, </span><span class="color-violet">move </span><span class="color-gold">_4</span><span class="color-white">) -&gt; bb1; </span><span class="color-gray">// scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">29</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">30</span><span class="code-fence-code">                                         <span class="color-gray">// + span: /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">31</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: unsafe fn(usize, usize) -&gt; *mut u8 {alloc::alloc::exchange_malloc}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">32</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">33</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">34</span><span class="code-fence-code"><span class="color-white">    bb1: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">35</span><span class="code-fence-code">        <span class="color-gold">_6 </span><span class="color-white">= ShallowInitBox(</span><span class="color-violet">move </span><span class="color-gold">_5</span><span class="color-white">, [</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]); </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">36</span><span class="code-fence-code">        <span class="color-gold">_9 </span><span class="color-white">= (((</span><span class="color-gold">_6</span><span class="color-white">.</span><span class="color-gold">0</span><span class="color-white">: std::ptr::Unique&lt;[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]&gt;).</span><span class="color-gold">0</span><span class="color-white">: std::ptr::NonNull&lt;[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]&gt;).</span><span class="color-gold">0</span><span class="color-white">: *</span><span class="color-violet">const </span><span class="color-white">[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]); </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">37</span><span class="code-fence-code"><span class="color-white">        (*</span><span class="color-gold">_9</span><span class="color-white">) = [</span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">2_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">3_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">4_</span><span class="color-violet">i32</span><span class="color-white">]; </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">38</span><span class="code-fence-code">        <span class="color-gold">_2 </span><span class="color-white">= </span><span class="color-violet">move </span><span class="color-gold">_6 </span><span class="color-white">as std::boxed::Box&lt;[</span><span class="color-violet">i32</span><span class="color-white">]&gt; (Pointer(Unsize)); </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">39</span><span class="code-fence-code">        <span class="color-gold">_1 </span><span class="color-white">= slice::hack::into_vec::&lt;</span><span class="color-violet">i32</span><span class="color-white">, std::alloc::Global&gt;(</span><span class="color-violet">move </span><span class="color-gold">_2</span><span class="color-white">) -&gt; bb6; </span><span class="color-gray">// scope 3 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/slice.rs:463:9: 463:29</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">40</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">41</span><span class="code-fence-code">                                         <span class="color-gray">// + span: /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/slice.rs:463:9: 463:23</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">42</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: fn(Box&lt;[i32]&gt;) -&gt; Vec&lt;i32&gt; {slice::hack::into_vec::&lt;i32, std::alloc::Global&gt;}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">43</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">44</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">45</span><span class="code-fence-code"><span class="color-white">    bb2: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">46</span><span class="code-fence-code"><span class="color-white">        StorageDead(</span><span class="color-gold">_8</span><span class="color-white">);                 </span><span class="color-gray">// scope 1 at src/main.rs:3:13: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">47</span><span class="code-fence-code">        <span class="color-emerald">drop</span><span class="color-white">(</span><span class="color-gold">_1</span><span class="color-white">) -&gt; bb3;                 </span><span class="color-gray">// scope 0 at src/main.rs:4:1: 4:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">48</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">49</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">50</span><span class="code-fence-code"><span class="color-white">    bb3: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">51</span><span class="code-fence-code"><span class="color-white">        StorageDead(</span><span class="color-gold">_1</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at src/main.rs:4:1: 4:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">52</span><span class="code-fence-code">        <span class="color-violet">return</span><span class="color-white">;                          </span><span class="color-gray">// scope 0 at src/main.rs:4:2: 4:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">53</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">54</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">55</span><span class="code-fence-code"><span class="color-white">    bb4 (cleanup): {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">56</span><span class="code-fence-code">        <span class="color-emerald">drop</span><span class="color-white">(</span><span class="color-gold">_1</span><span class="color-white">) -&gt; [</span><span class="color-violet">return</span><span class="color-white">: bb5, unwind terminate]; </span><span class="color-gray">// scope 0 at src/main.rs:4:1: 4:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">57</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">58</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">59</span><span class="code-fence-code"><span class="color-white">    bb5 (cleanup): {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">60</span><span class="code-fence-code"><span class="color-white">        resume;                          </span><span class="color-gray">// scope 0 at src/main.rs:1:1: 4:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">61</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">62</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">63</span><span class="code-fence-code"><span class="color-white">    bb6: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">64</span><span class="code-fence-code"><span class="color-white">        StorageDead(</span><span class="color-gold">_2</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:55:9: 55:10</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">65</span><span class="code-fence-code"><span class="color-white">        StorageLive(</span><span class="color-gold">_8</span><span class="color-white">);                 </span><span class="color-gray">// scope 1 at src/main.rs:3:5: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">66</span><span class="code-fence-code">        <span class="color-gold">_8 </span><span class="color-white">= &amp;</span><span class="color-violet">mut </span><span class="color-gold">_1</span><span class="color-white">;                    </span><span class="color-gray">// scope 1 at src/main.rs:3:5: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">67</span><span class="code-fence-code">        <span class="color-gold">_7 </span><span class="color-white">= Vec::&lt;</span><span class="color-violet">i32</span><span class="color-white">&gt;::push(</span><span class="color-violet">move </span><span class="color-gold">_8</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">5_</span><span class="color-violet">i32</span><span class="color-white">) -&gt; [</span><span class="color-violet">return</span><span class="color-white">: bb2, unwind: bb4]; </span><span class="color-gray">// scope 1 at src/main.rs:3:5: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">68</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">69</span><span class="code-fence-code">                                         <span class="color-gray">// + span: src/main.rs:3:7: 3:11</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">70</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: for&lt;&apos;a&gt; fn(&amp;&apos;a mut Vec&lt;i32&gt;, i32) {Vec::&lt;i32&gt;::push}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">71</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">72</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(6)" class="copy-fenced-code">Copy</button></pre><p>It&apos;s way shorter! <code class="inline-code-span">bb0</code> doesn&apos;t calculate the size and the alignment of <code class="inline-code-span">[i32; 4]</code> anymore. I guess the compiler calculated it and hard-coded it. There are <code class="inline-code-span">StorageDead</code> and <code class="inline-code-span">StorageLive</code> functions which we didn&apos;t see in debug mode. <code class="inline-code-span">StorageLive(_1)</code> tells LLVM that <code class="inline-code-span">_1</code> may be used later. <code class="inline-code-span">StorageDead(_1)</code> means it won&apos;t be used anymore. It helps LLVM allocate stack space.</p><p>In release mode, it doens&apos;t check the alignment of the pointer anymore. It just initializes the vector in <code class="inline-code-span">bb1</code>.</p><p>Reference: <a href="https://rustc-dev-guide.rust-lang.org/mir/index.html">RustC Dev Guide</a></p><h3 id="example-2-adder">Example 2: Adder</h3><p>Let&apos;s do the same thing with another simple code.</p><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code">    <span class="color-emerald">add</span><span class="color-white">(</span><span class="color-gold">3</span><span class="color-white">, </span><span class="color-gold">4</span><span class="color-white">);</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">foo</span><span class="color-white">(</span><span class="color-red">a</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-red">b</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">) -&gt; </span><span class="color-violet">i32 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code">    <span class="color-violet">if</span><span class="color-white"> a &gt; b { a + </span><span class="color-gold">1 </span><span class="color-white">} </span><span class="color-violet">else </span><span class="color-white">{ b + </span><span class="color-gold">1</span><span class="color-white">}</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(7)" class="copy-fenced-code">Copy</button></pre><p>We don&apos;t need HIR this time: it&apos;s (almost) identical to the original code. Let&apos;s go directly to the MIR.</p><p><a id="mirex3"></a></p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gray">// WARNING: This output format is intended for human consumers only</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gray">// and is subject to change without notice. Knock yourself out.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() -&gt; () {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_0</span><span class="color-white">: ();                      </span><span class="color-gray">// return place in scope 0 at src/main.rs:1:11: 1:11</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code">    <span class="color-violet">let </span><span class="color-gold">_1</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">;                         </span><span class="color-gray">// in scope 0 at src/main.rs:2:5: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">    bb0: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">        <span class="color-gold">_1 </span><span class="color-white">= </span><span class="color-emerald">foo</span><span class="color-white">(</span><span class="color-violet">const </span><span class="color-gold">3_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">4_</span><span class="color-violet">i32</span><span class="color-white">) -&gt; bb1; </span><span class="color-gray">// scope 0 at src/main.rs:2:5: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code">                                         <span class="color-gray">// + span: src/main.rs:2:5: 2:8</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: fn(i32, i32) -&gt; i32 {foo}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code"><span class="color-white">    bb1: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code">        <span class="color-violet">return</span><span class="color-white">;                          </span><span class="color-gray">// scope 0 at src/main.rs:3:2: 3:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">foo</span><span class="color-white">(</span><span class="color-red">_1</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-red">_2</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">) -&gt; </span><span class="color-violet">i32 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code"><span class="color-white">    debug a =&gt; </span><span class="color-gold">_1</span><span class="color-white">;                       </span><span class="color-gray">// in scope 0 at src/main.rs:5:8: 5:9</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code"><span class="color-white">    debug b =&gt; </span><span class="color-gold">_2</span><span class="color-white">;                       </span><span class="color-gray">// in scope 0 at src/main.rs:5:16: 5:17</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">22</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_0</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">;                     </span><span class="color-gray">// return place in scope 0 at src/main.rs:5:27: 5:30</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">23</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_3</span><span class="color-white">: </span><span class="color-violet">bool</span><span class="color-white">;                    </span><span class="color-gray">// in scope 0 at src/main.rs:6:8: 6:13</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">24</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_4</span><span class="color-white">: (</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">bool</span><span class="color-white">);             </span><span class="color-gray">// in scope 0 at src/main.rs:6:16: 6:21</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">25</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_5</span><span class="color-white">: (</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">bool</span><span class="color-white">);             </span><span class="color-gray">// in scope 0 at src/main.rs:6:31: 6:36</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">26</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">27</span><span class="code-fence-code"><span class="color-white">    bb0: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">28</span><span class="code-fence-code">        <span class="color-gold">_3 </span><span class="color-white">= Gt(</span><span class="color-gold">_1</span><span class="color-white">, </span><span class="color-gold">_2</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at src/main.rs:6:8: 6:13</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">29</span><span class="code-fence-code"><span class="color-white">        switchInt(</span><span class="color-violet">move </span><span class="color-gold">_3</span><span class="color-white">) -&gt; [</span><span class="color-gold">0</span><span class="color-white">: bb3, otherwise: bb1]; </span><span class="color-gray">// scope 0 at src/main.rs:6:8: 6:13</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">30</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">31</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">32</span><span class="code-fence-code"><span class="color-white">    bb1: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">33</span><span class="code-fence-code">        <span class="color-gold">_4 </span><span class="color-white">= CheckedAdd(</span><span class="color-gold">_1</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">i32</span><span class="color-white">); </span><span class="color-gray">// scope 0 at src/main.rs:6:16: 6:21</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">34</span><span class="code-fence-code">        <span class="color-emerald">assert</span><span class="color-white">(!</span><span class="color-violet">move </span><span class="color-white">(</span><span class="color-gold">_4</span><span class="color-white">.</span><span class="color-gold">1</span><span class="color-white">: </span><span class="color-violet">bool</span><span class="color-white">), &quot;</span><span class="color-green">attempt to compute `{} + {}`, which would overflow</span><span class="color-white">&quot;, </span><span class="color-gold">_1</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">i32</span><span class="color-white">) -&gt; bb2; </span><span class="color-gray">// scope 0 at src/main.rs:6:16: 6:21</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">35</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">36</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">37</span><span class="code-fence-code"><span class="color-white">    bb2: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">38</span><span class="code-fence-code">        <span class="color-gold">_0 </span><span class="color-white">= </span><span class="color-violet">move </span><span class="color-white">(</span><span class="color-gold">_4</span><span class="color-white">.</span><span class="color-gold">0</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">);           </span><span class="color-gray">// scope 0 at src/main.rs:6:16: 6:21</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">39</span><span class="code-fence-code"><span class="color-white">        goto -&gt; bb5;                     </span><span class="color-gray">// scope 0 at src/main.rs:6:5: 6:37</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">40</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">41</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">42</span><span class="code-fence-code"><span class="color-white">    bb3: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">43</span><span class="code-fence-code">        <span class="color-gold">_5 </span><span class="color-white">= CheckedAdd(</span><span class="color-gold">_2</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">i32</span><span class="color-white">); </span><span class="color-gray">// scope 0 at src/main.rs:6:31: 6:36</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">44</span><span class="code-fence-code">        <span class="color-emerald">assert</span><span class="color-white">(!</span><span class="color-violet">move </span><span class="color-white">(</span><span class="color-gold">_5</span><span class="color-white">.</span><span class="color-gold">1</span><span class="color-white">: </span><span class="color-violet">bool</span><span class="color-white">), &quot;</span><span class="color-green">attempt to compute `{} + {}`, which would overflow</span><span class="color-white">&quot;, </span><span class="color-gold">_2</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">i32</span><span class="color-white">) -&gt; bb4; </span><span class="color-gray">// scope 0 at src/main.rs:6:31: 6:36</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">45</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">46</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">47</span><span class="code-fence-code"><span class="color-white">    bb4: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">48</span><span class="code-fence-code">        <span class="color-gold">_0 </span><span class="color-white">= </span><span class="color-violet">move </span><span class="color-white">(</span><span class="color-gold">_5</span><span class="color-white">.</span><span class="color-gold">0</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">);           </span><span class="color-gray">// scope 0 at src/main.rs:6:31: 6:36</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">49</span><span class="code-fence-code"><span class="color-white">        goto -&gt; bb5;                     </span><span class="color-gray">// scope 0 at src/main.rs:6:5: 6:37</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">50</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">51</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">52</span><span class="code-fence-code"><span class="color-white">    bb5: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">53</span><span class="code-fence-code">        <span class="color-violet">return</span><span class="color-white">;                          </span><span class="color-gray">// scope 0 at src/main.rs:7:2: 7:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">54</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">55</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(8)" class="copy-fenced-code">Copy</button></pre><p>Above is its MIR in debug mode. Let&apos;s look at the <code class="inline-code-span">foo</code> function. Two parameters: <code class="inline-code-span">a</code> and <code class="inline-code-span">b</code> are assigned to <code class="inline-code-span">_1</code> and <code class="inline-code-span">_2</code>. You can see their debug info at the top of the function. Its return value is assigned to <code class="inline-code-span">_0</code>, as usual. <code class="inline-code-span">_3</code> is a temporary variable which stores the result of <code class="inline-code-span">a &gt; b</code>.</p><p>In <code class="inline-code-span">bb0</code>, it computes the result of <code class="inline-code-span">a &gt; b</code> and stores it at <code class="inline-code-span">_3</code>. If the result is 0, it goes to <code class="inline-code-span">bb3</code>. Otherwise, it goes to <code class="inline-code-span">bb1</code>. In <code class="inline-code-span">bb1</code> and <code class="inline-code-span">bb3</code>, it calls <code class="inline-code-span">CheckedAdd</code>, not just <code class="inline-code-span">Add</code>. The <code class="inline-code-span">CheckedAdd</code> function returns the result and whether it overflowed. That&apos;s why the type of <code class="inline-code-span">_4</code> and <code class="inline-code-span">_5</code> are <code class="inline-code-span">(i32, bool)</code>.</p><p>After that, it goes to <code class="inline-code-span">bb2</code> or <code class="inline-code-span">bb4</code> where it moves the result to <code class="inline-code-span">_0</code> and returns.</p><p>In release mode, it&apos;s way simpler. See below.</p><p><a id="mirex4"></a></p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gray">// WARNING: This output format is intended for human consumers only</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gray">// and is subject to change without notice. Knock yourself out.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() -&gt; () {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_0</span><span class="color-white">: ();                      </span><span class="color-gray">// return place in scope 0 at src/main.rs:1:11: 1:11</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code">    <span class="color-violet">let </span><span class="color-gold">_1</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">;                         </span><span class="color-gray">// in scope 0 at src/main.rs:2:5: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">    bb0: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-white">        StorageLive(</span><span class="color-gold">_1</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at src/main.rs:2:5: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code">        <span class="color-gold">_1 </span><span class="color-white">= </span><span class="color-emerald">foo</span><span class="color-white">(</span><span class="color-violet">const </span><span class="color-gold">3_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">4_</span><span class="color-violet">i32</span><span class="color-white">) -&gt; bb1; </span><span class="color-gray">// scope 0 at src/main.rs:2:5: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code">                                         <span class="color-gray">// + span: src/main.rs:2:5: 2:8</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: fn(i32, i32) -&gt; i32 {foo}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code"><span class="color-white">    bb1: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code"><span class="color-white">        StorageDead(</span><span class="color-gold">_1</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at src/main.rs:2:14: 2:15</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code">        <span class="color-violet">return</span><span class="color-white">;                          </span><span class="color-gray">// scope 0 at src/main.rs:3:2: 3:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">foo</span><span class="color-white">(</span><span class="color-red">_1</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-red">_2</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">) -&gt; </span><span class="color-violet">i32 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">22</span><span class="code-fence-code"><span class="color-white">    debug a =&gt; </span><span class="color-gold">_1</span><span class="color-white">;                       </span><span class="color-gray">// in scope 0 at src/main.rs:5:8: 5:9</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">23</span><span class="code-fence-code"><span class="color-white">    debug b =&gt; </span><span class="color-gold">_2</span><span class="color-white">;                       </span><span class="color-gray">// in scope 0 at src/main.rs:5:16: 5:17</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">24</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_0</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">;                     </span><span class="color-gray">// return place in scope 0 at src/main.rs:5:27: 5:30</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">25</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_3</span><span class="color-white">: </span><span class="color-violet">bool</span><span class="color-white">;                    </span><span class="color-gray">// in scope 0 at src/main.rs:6:8: 6:13</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">26</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">27</span><span class="code-fence-code"><span class="color-white">    bb0: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">28</span><span class="code-fence-code"><span class="color-white">        StorageLive(</span><span class="color-gold">_3</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at src/main.rs:6:8: 6:13</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">29</span><span class="code-fence-code">        <span class="color-gold">_3 </span><span class="color-white">= Gt(</span><span class="color-gold">_1</span><span class="color-white">, </span><span class="color-gold">_2</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at src/main.rs:6:8: 6:13</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">30</span><span class="code-fence-code"><span class="color-white">        switchInt(</span><span class="color-violet">move </span><span class="color-gold">_3</span><span class="color-white">) -&gt; [</span><span class="color-gold">0</span><span class="color-white">: bb2, otherwise: bb1]; </span><span class="color-gray">// scope 0 at src/main.rs:6:8: 6:13</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">31</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">32</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">33</span><span class="code-fence-code"><span class="color-white">    bb1: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">34</span><span class="code-fence-code">        <span class="color-gold">_0 </span><span class="color-white">= Add(</span><span class="color-gold">_1</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">i32</span><span class="color-white">);       </span><span class="color-gray">// scope 0 at src/main.rs:6:16: 6:21</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">35</span><span class="code-fence-code"><span class="color-white">        goto -&gt; bb3;                     </span><span class="color-gray">// scope 0 at src/main.rs:6:5: 6:37</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">36</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">37</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">38</span><span class="code-fence-code"><span class="color-white">    bb2: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">39</span><span class="code-fence-code">        <span class="color-gold">_0 </span><span class="color-white">= Add(</span><span class="color-gold">_2</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">i32</span><span class="color-white">);       </span><span class="color-gray">// scope 0 at src/main.rs:6:31: 6:36</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">40</span><span class="code-fence-code"><span class="color-white">        goto -&gt; bb3;                     </span><span class="color-gray">// scope 0 at src/main.rs:6:5: 6:37</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">41</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">42</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">43</span><span class="code-fence-code"><span class="color-white">    bb3: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">44</span><span class="code-fence-code"><span class="color-white">        StorageDead(</span><span class="color-gold">_3</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at src/main.rs:6:36: 6:37</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">45</span><span class="code-fence-code">        <span class="color-violet">return</span><span class="color-white">;                          </span><span class="color-gray">// scope 0 at src/main.rs:7:2: 7:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">46</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">47</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(9)" class="copy-fenced-code">Copy</button></pre><p>I have no idea why <code class="inline-code-span">StorageLive</code> and <code class="inline-code-span">StorageDead</code> only appear in release mode. It&apos;s almost identical to the previous MIR, except that it doesn&apos;t check the overflow.</p><h3 id="example-3-hello-world">Example 3: Hello World</h3><pre class="fenced-code-block"><code><span class="code-fence-row"><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() {</span></span></span>
<span class="code-fence-row"><span class="code-fence-code"><span class="color-white">    println!(&quot;</span><span class="color-green">Hello World!</span><span class="color-white">&quot;);</span></span></span>
<span class="code-fence-row"><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code></pre><p>Let&apos;s go straight to the MIR.</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gray">// WARNING: This output format is intended for human consumers only</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gray">// and is subject to change without notice. Knock yourself out.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() -&gt; () {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_0</span><span class="color-white">: ();                      </span><span class="color-gray">// return place in scope 0 at src/main.rs:1:11: 1:11</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code">    <span class="color-violet">let </span><span class="color-gold">_1</span><span class="color-white">: ();                          </span><span class="color-gray">// in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:9: 137:62</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_2</span><span class="color-white">: std::fmt::Arguments&lt;&apos;_&gt;; </span><span class="color-gray">// in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_3</span><span class="color-white">: &amp;[&amp;</span><span class="color-violet">str</span><span class="color-white">];                 </span><span class="color-gray">// in scope 0 at src/main.rs:2:14: 2:28</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_4</span><span class="color-white">: &amp;[core::fmt::ArgumentV1&lt;&apos;_&gt;]; </span><span class="color-gray">// in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_5</span><span class="color-white">: &amp;[core::fmt::ArgumentV1&lt;&apos;_&gt;; </span><span class="color-gold">0</span><span class="color-white">]; </span><span class="color-gray">// in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_6</span><span class="color-white">: &amp;[&amp;</span><span class="color-violet">str</span><span class="color-white">; </span><span class="color-gold">1</span><span class="color-white">];              </span><span class="color-gray">// in scope 0 at src/main.rs:2:14: 2:28</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code"><span class="color-white">    bb0: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code">        <span class="color-gold">_6 </span><span class="color-white">= </span><span class="color-violet">const </span><span class="color-white">_;                    </span><span class="color-gray">// scope 0 at src/main.rs:2:14: 2:28</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code">                                         <span class="color-gray">// + span: src/main.rs:2:14: 2:28</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: &amp;[&amp;str; 1], val: Unevaluated(main, [], Some(promoted[1])) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code">        <span class="color-gold">_3 </span><span class="color-white">= </span><span class="color-gold">_6 </span><span class="color-white">as &amp;[&amp;</span><span class="color-violet">str</span><span class="color-white">] (Pointer(Unsize)); </span><span class="color-gray">// scope 0 at src/main.rs:2:14: 2:28</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code">        <span class="color-gold">_5 </span><span class="color-white">= </span><span class="color-violet">const </span><span class="color-white">_;                    </span><span class="color-gray">// scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code">                                         <span class="color-gray">// + span: /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: &amp;[core::fmt::ArgumentV1&lt;&apos;_&gt;; 0], val: Unevaluated(main, [], Some(promoted[0])) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">22</span><span class="code-fence-code">        <span class="color-gold">_4 </span><span class="color-white">= </span><span class="color-gold">_5 </span><span class="color-white">as &amp;[core::fmt::ArgumentV1&lt;&apos;_&gt;] (Pointer(Unsize)); </span><span class="color-gray">// scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">23</span><span class="code-fence-code">        <span class="color-gold">_2 </span><span class="color-white">= Arguments::&lt;&apos;_&gt;::new_v1(</span><span class="color-violet">move </span><span class="color-gold">_3</span><span class="color-white">, </span><span class="color-violet">move </span><span class="color-gold">_4</span><span class="color-white">) -&gt; bb1; </span><span class="color-gray">// scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">24</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">25</span><span class="code-fence-code">                                         <span class="color-gray">// + span: /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">26</span><span class="code-fence-code">                                         <span class="color-gray">// + user_ty: UserType(0)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">27</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: fn(&amp;[&amp;&apos;static str], &amp;[core::fmt::ArgumentV1&lt;&apos;_&gt;]) -&gt; Arguments&lt;&apos;_&gt; {Arguments::&lt;&apos;_&gt;::new_v1}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">28</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">29</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">30</span><span class="code-fence-code"><span class="color-white">    bb1: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">31</span><span class="code-fence-code">        <span class="color-gold">_1 </span><span class="color-white">= </span><span class="color-emerald">_print</span><span class="color-white">(</span><span class="color-violet">move </span><span class="color-gold">_2</span><span class="color-white">) -&gt; bb2;     </span><span class="color-gray">// scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:9: 137:62</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">32</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">33</span><span class="code-fence-code">                                         <span class="color-gray">// + span: /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:9: 137:27</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">34</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: for&lt;&apos;a&gt; fn(Arguments&lt;&apos;a&gt;) {_print}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">35</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">36</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">37</span><span class="code-fence-code"><span class="color-white">    bb2: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">38</span><span class="code-fence-code">        <span class="color-violet">return</span><span class="color-white">;                          </span><span class="color-gray">// scope 0 at src/main.rs:3:2: 3:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">39</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">40</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">41</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">42</span><span class="code-fence-code"><span class="color-white">promoted[</span><span class="color-gold">0</span><span class="color-white">] in main: &amp;[core::fmt::ArgumentV1&lt;&apos;_&gt;; </span><span class="color-gold">0</span><span class="color-white">] = {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">43</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_0</span><span class="color-white">: &amp;[core::fmt::ArgumentV1&lt;&apos;_&gt;; </span><span class="color-gold">0</span><span class="color-white">]; </span><span class="color-gray">// return place in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">44</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_1</span><span class="color-white">: [core::fmt::ArgumentV1&lt;&apos;_&gt;; </span><span class="color-gold">0</span><span class="color-white">]; </span><span class="color-gray">// in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">45</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">46</span><span class="code-fence-code"><span class="color-white">    bb0: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">47</span><span class="code-fence-code">        <span class="color-gold">_1 </span><span class="color-white">= [];                         </span><span class="color-gray">// scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">48</span><span class="code-fence-code">        <span class="color-gold">_0 </span><span class="color-white">= &amp;</span><span class="color-gold">_1</span><span class="color-white">;                        </span><span class="color-gray">// scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">49</span><span class="code-fence-code">        <span class="color-violet">return</span><span class="color-white">;                          </span><span class="color-gray">// scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">50</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">51</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">52</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">53</span><span class="code-fence-code"><span class="color-white">promoted[</span><span class="color-gold">1</span><span class="color-white">] in main: &amp;[&amp;</span><span class="color-violet">str</span><span class="color-white">; </span><span class="color-gold">1</span><span class="color-white">] = {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">54</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_0</span><span class="color-white">: &amp;[&amp;</span><span class="color-violet">str</span><span class="color-white">; </span><span class="color-gold">1</span><span class="color-white">];              </span><span class="color-gray">// return place in scope 0 at src/main.rs:2:14: 2:28</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">55</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_1</span><span class="color-white">: [&amp;</span><span class="color-violet">str</span><span class="color-white">; </span><span class="color-gold">1</span><span class="color-white">];               </span><span class="color-gray">// in scope 0 at src/main.rs:2:14: 2:28</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">56</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">57</span><span class="code-fence-code"><span class="color-white">    bb0: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">58</span><span class="code-fence-code">        <span class="color-gold">_1 </span><span class="color-white">= [</span><span class="color-violet">const </span><span class="color-white">&quot;</span><span class="color-green">Hello World!</span><span class="color-emerald">\n</span><span class="color-white">&quot;];   </span><span class="color-gray">// scope 0 at src/main.rs:2:14: 2:28</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">59</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">60</span><span class="code-fence-code">                                         <span class="color-gray">// + span: src/main.rs:2:14: 2:28</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">61</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: &amp;str, val: Value(Slice(..)) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">62</span><span class="code-fence-code">        <span class="color-gold">_0 </span><span class="color-white">= &amp;</span><span class="color-gold">_1</span><span class="color-white">;                        </span><span class="color-gray">// scope 0 at src/main.rs:2:14: 2:28</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">63</span><span class="code-fence-code">        <span class="color-violet">return</span><span class="color-white">;                          </span><span class="color-gray">// scope 0 at src/main.rs:2:14: 2:28</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">64</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">65</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(11)" class="copy-fenced-code">Copy</button></pre><p>Interesting that Hello World generates this long MIR. There are <code class="inline-code-span">promoted</code> blocks which we haven&apos;t seen before. Constants in MIR are stored in a <code class="inline-code-span">promoted</code> vector. The <code class="inline-code-span">promoted</code> blocks initialize the constants. For example, line 13 above assigns a constant to <code class="inline-code-span">_6</code>, but it doesn&apos;t tell us what the constant is. If you read the comments carefully, it says the value can be found in <code class="inline-code-span">promoted[1]</code>. In the <code class="inline-code-span">promoted[1]</code> block, it initializes <code class="inline-code-span">const &quot;Hello World!\n&quot;</code>.</p><h3 id="example-4-drop-elaboration">Example 4: Drop Elaboration</h3><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code">    <span class="color-violet">let mut</span><span class="color-white"> y = vec![</span><span class="color-gold">1</span><span class="color-white">, </span><span class="color-gold">2</span><span class="color-white">, </span><span class="color-gold">3</span><span class="color-white">, </span><span class="color-gold">4</span><span class="color-white">];</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">    {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code">        <span class="color-violet">let</span><span class="color-white"> x = vec![</span><span class="color-gold">5</span><span class="color-white">, </span><span class="color-gold">6</span><span class="color-white">, </span><span class="color-gold">7</span><span class="color-white">, </span><span class="color-gold">8</span><span class="color-white">];</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code">        <span class="color-violet">if </span><span class="color-white">std::process::id() % </span><span class="color-gold">2 </span><span class="color-white">== </span><span class="color-gold">0 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-white">            y = x;</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-white">        }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(12)" class="copy-fenced-code">Copy</button></pre><p>The code above is from <a href="https://rustc-dev-guide.rust-lang.org/mir/drop-elaboration.html">rustc-dev-guide</a>. MIR implements a special flag called &quot;drop flag&quot;. It&apos;s used to track dynamic drops. In the above code, the compiler cannot know whether <code class="inline-code-span">y = x;</code> will be executed or not. That means the compiler does not know when to drop <code class="inline-code-span">[1, 2, 3, 4]</code>. Let&apos;s see how the compiler deals with this problem. Below is the MIR of the above code in release mode.</p><pre class="fenced-code-block line-num-width-2"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gray">// WARNING: This output format is intended for human consumers only</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gray">// and is subject to change without notice. Knock yourself out.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() -&gt; () {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_0</span><span class="color-white">: ();                      </span><span class="color-gray">// return place in scope 0 at src/main.rs:1:11: 1:11</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_1</span><span class="color-white">: std::vec::Vec&lt;</span><span class="color-violet">i32</span><span class="color-white">&gt;;      </span><span class="color-gray">// in scope 0 at src/main.rs:2:9: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_2</span><span class="color-white">: std::boxed::Box&lt;[</span><span class="color-violet">i32</span><span class="color-white">]&gt;;  </span><span class="color-gray">// in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_3</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                   </span><span class="color-gray">// in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_4</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                   </span><span class="color-gray">// in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_5</span><span class="color-white">: *</span><span class="color-violet">mut u8</span><span class="color-white">;                 </span><span class="color-gray">// in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_6</span><span class="color-white">: std::boxed::Box&lt;[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]&gt;; </span><span class="color-gray">// in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_8</span><span class="color-white">: std::boxed::Box&lt;[</span><span class="color-violet">i32</span><span class="color-white">]&gt;;  </span><span class="color-gray">// in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_9</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                   </span><span class="color-gray">// in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_10</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                  </span><span class="color-gray">// in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_11</span><span class="color-white">: *</span><span class="color-violet">mut u8</span><span class="color-white">;                </span><span class="color-gray">// in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_12</span><span class="color-white">: std::boxed::Box&lt;[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]&gt;; </span><span class="color-gray">// in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_13</span><span class="color-white">: </span><span class="color-violet">u32</span><span class="color-white">;                    </span><span class="color-gray">// in scope 0 at src/main.rs:7:12: 7:34</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_14</span><span class="color-white">: </span><span class="color-violet">u32</span><span class="color-white">;                    </span><span class="color-gray">// in scope 0 at src/main.rs:7:12: 7:30</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_15</span><span class="color-white">: std::vec::Vec&lt;</span><span class="color-violet">i32</span><span class="color-white">&gt;;     </span><span class="color-gray">// in scope 0 at src/main.rs:8:17: 8:18</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_16</span><span class="color-white">: </span><span class="color-violet">bool</span><span class="color-white">;                   </span><span class="color-gray">// in scope 0 at src/main.rs:11:5: 11:6</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_17</span><span class="color-white">: *</span><span class="color-violet">const </span><span class="color-white">[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">];        </span><span class="color-gray">// in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_18</span><span class="color-white">: *</span><span class="color-violet">const </span><span class="color-white">[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">];        </span><span class="color-gray">// in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">22</span><span class="code-fence-code"><span class="color-white">    scope </span><span class="color-gold">1 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">23</span><span class="code-fence-code"><span class="color-white">        debug y =&gt; </span><span class="color-gold">_1</span><span class="color-white">;                   </span><span class="color-gray">// in scope 1 at src/main.rs:2:9: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">24</span><span class="code-fence-code">        <span class="color-violet">let </span><span class="color-gold">_7</span><span class="color-white">: std::vec::Vec&lt;</span><span class="color-violet">i32</span><span class="color-white">&gt;;      </span><span class="color-gray">// in scope 1 at src/main.rs:5:13: 5:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">25</span><span class="code-fence-code"><span class="color-white">        scope </span><span class="color-gold">3 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">26</span><span class="code-fence-code"><span class="color-white">            debug x =&gt; </span><span class="color-gold">_7</span><span class="color-white">;               </span><span class="color-gray">// in scope 3 at src/main.rs:5:13: 5:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">27</span><span class="code-fence-code"><span class="color-white">        }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">28</span><span class="code-fence-code"><span class="color-white">        scope </span><span class="color-gold">4 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">29</span><span class="code-fence-code"><span class="color-white">        }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">30</span><span class="code-fence-code"><span class="color-white">        scope </span><span class="color-gold">6 </span><span class="color-white">(inlined slice::&lt;impl [</span><span class="color-violet">i32</span><span class="color-white">]&gt;::into_vec::&lt;std::alloc::Global&gt;) { </span><span class="color-gray">// at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:50:36: 55:10</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">31</span><span class="code-fence-code"><span class="color-white">            debug </span><span class="color-red">self </span><span class="color-white">=&gt; </span><span class="color-gold">_8</span><span class="color-white">;            </span><span class="color-gray">// in scope 6 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/slice.rs:461:35: 461:39</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">32</span><span class="code-fence-code"><span class="color-white">        }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">33</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">34</span><span class="code-fence-code"><span class="color-white">    scope </span><span class="color-gold">2 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">35</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">36</span><span class="code-fence-code"><span class="color-white">    scope </span><span class="color-gold">5 </span><span class="color-white">(inlined slice::&lt;impl [</span><span class="color-violet">i32</span><span class="color-white">]&gt;::into_vec::&lt;std::alloc::Global&gt;) { </span><span class="color-gray">// at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:50:36: 55:10</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">37</span><span class="code-fence-code"><span class="color-white">        debug </span><span class="color-red">self </span><span class="color-white">=&gt; </span><span class="color-gold">_2</span><span class="color-white">;                </span><span class="color-gray">// in scope 5 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/slice.rs:461:35: 461:39</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">38</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">39</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">40</span><span class="code-fence-code"><span class="color-white">    bb0: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">41</span><span class="code-fence-code"><span class="color-white">        StorageLive(</span><span class="color-gold">_1</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at src/main.rs:2:9: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">42</span><span class="code-fence-code"><span class="color-white">        StorageLive(</span><span class="color-gold">_2</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">43</span><span class="code-fence-code">        <span class="color-gold">_3 </span><span class="color-white">= </span><span class="color-violet">const </span><span class="color-gold">16_</span><span class="color-violet">usize</span><span class="color-white">;             </span><span class="color-gray">// scope 2 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">44</span><span class="code-fence-code">        <span class="color-gold">_4 </span><span class="color-white">= </span><span class="color-violet">const </span><span class="color-gold">4_</span><span class="color-violet">usize</span><span class="color-white">;              </span><span class="color-gray">// scope 2 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">45</span><span class="code-fence-code">        <span class="color-gold">_5 </span><span class="color-white">= alloc::alloc::exchange_malloc(</span><span class="color-violet">move </span><span class="color-gold">_3</span><span class="color-white">, </span><span class="color-violet">move </span><span class="color-gold">_4</span><span class="color-white">) -&gt; bb1; </span><span class="color-gray">// scope 2 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">46</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">47</span><span class="code-fence-code">                                         <span class="color-gray">// + span: /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">48</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: unsafe fn(usize, usize) -&gt; *mut u8 {alloc::alloc::exchange_malloc}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">49</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">50</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">51</span><span class="code-fence-code"><span class="color-white">    bb1: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">52</span><span class="code-fence-code">        <span class="color-gold">_6 </span><span class="color-white">= ShallowInitBox(</span><span class="color-violet">move </span><span class="color-gold">_5</span><span class="color-white">, [</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]); </span><span class="color-gray">// scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">53</span><span class="code-fence-code">        <span class="color-gold">_17 </span><span class="color-white">= (((</span><span class="color-gold">_6</span><span class="color-white">.</span><span class="color-gold">0</span><span class="color-white">: std::ptr::Unique&lt;[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]&gt;).</span><span class="color-gold">0</span><span class="color-white">: std::ptr::NonNull&lt;[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]&gt;).</span><span class="color-gold">0</span><span class="color-white">: *</span><span class="color-violet">const </span><span class="color-white">[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]); </span><span class="color-gray">// scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">54</span><span class="code-fence-code"><span class="color-white">        (*</span><span class="color-gold">_17</span><span class="color-white">) = [</span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">2_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">3_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">4_</span><span class="color-violet">i32</span><span class="color-white">]; </span><span class="color-gray">// scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">55</span><span class="code-fence-code">        <span class="color-gold">_2 </span><span class="color-white">= </span><span class="color-violet">move </span><span class="color-gold">_6 </span><span class="color-white">as std::boxed::Box&lt;[</span><span class="color-violet">i32</span><span class="color-white">]&gt; (Pointer(Unsize)); </span><span class="color-gray">// scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">56</span><span class="code-fence-code">        <span class="color-gold">_1 </span><span class="color-white">= slice::hack::into_vec::&lt;</span><span class="color-violet">i32</span><span class="color-white">, std::alloc::Global&gt;(</span><span class="color-violet">move </span><span class="color-gold">_2</span><span class="color-white">) -&gt; bb16; </span><span class="color-gray">// scope 5 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/slice.rs:463:9: 463:29</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">57</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">58</span><span class="code-fence-code">                                         <span class="color-gray">// + span: /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/slice.rs:463:9: 463:23</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">59</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: fn(Box&lt;[i32]&gt;) -&gt; Vec&lt;i32&gt; {slice::hack::into_vec::&lt;i32, std::alloc::Global&gt;}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">60</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">61</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">62</span><span class="code-fence-code"><span class="color-white">    bb2: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">63</span><span class="code-fence-code">        <span class="color-gold">_12 </span><span class="color-white">= ShallowInitBox(</span><span class="color-violet">move </span><span class="color-gold">_11</span><span class="color-white">, [</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]); </span><span class="color-gray">// scope 1 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">64</span><span class="code-fence-code">        <span class="color-gold">_18 </span><span class="color-white">= (((</span><span class="color-gold">_12</span><span class="color-white">.</span><span class="color-gold">0</span><span class="color-white">: std::ptr::Unique&lt;[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]&gt;).</span><span class="color-gold">0</span><span class="color-white">: std::ptr::NonNull&lt;[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]&gt;).</span><span class="color-gold">0</span><span class="color-white">: *</span><span class="color-violet">const </span><span class="color-white">[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]); </span><span class="color-gray">// scope 1 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">65</span><span class="code-fence-code"><span class="color-white">        (*</span><span class="color-gold">_18</span><span class="color-white">) = [</span><span class="color-violet">const </span><span class="color-gold">5_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">6_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">7_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">8_</span><span class="color-violet">i32</span><span class="color-white">]; </span><span class="color-gray">// scope 1 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">66</span><span class="code-fence-code">        <span class="color-gold">_8 </span><span class="color-white">= </span><span class="color-violet">move </span><span class="color-gold">_12 </span><span class="color-white">as std::boxed::Box&lt;[</span><span class="color-violet">i32</span><span class="color-white">]&gt; (Pointer(Unsize)); </span><span class="color-gray">// scope 1 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">67</span><span class="code-fence-code">        <span class="color-gold">_7 </span><span class="color-white">= slice::hack::into_vec::&lt;</span><span class="color-violet">i32</span><span class="color-white">, std::alloc::Global&gt;(</span><span class="color-violet">move </span><span class="color-gold">_8</span><span class="color-white">) -&gt; [</span><span class="color-violet">return</span><span class="color-white">: bb17, unwind: bb9]; </span><span class="color-gray">// scope 6 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/slice.rs:463:9: 463:29</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">68</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">69</span><span class="code-fence-code">                                         <span class="color-gray">// + span: /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/slice.rs:463:9: 463:23</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">70</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: fn(Box&lt;[i32]&gt;) -&gt; Vec&lt;i32&gt; {slice::hack::into_vec::&lt;i32, std::alloc::Global&gt;}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">71</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">72</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">73</span><span class="code-fence-code"><span class="color-white">    bb3: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">74</span><span class="code-fence-code">        <span class="color-gold">_13 </span><span class="color-white">= Rem(</span><span class="color-violet">move </span><span class="color-gold">_14</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">2_</span><span class="color-violet">u32</span><span class="color-white">); </span><span class="color-gray">// scope 3 at src/main.rs:7:12: 7:34</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">75</span><span class="code-fence-code"><span class="color-white">        StorageDead(</span><span class="color-gold">_14</span><span class="color-white">);                </span><span class="color-gray">// scope 3 at src/main.rs:7:33: 7:34</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">76</span><span class="code-fence-code"><span class="color-white">        switchInt(</span><span class="color-violet">move </span><span class="color-gold">_13</span><span class="color-white">) -&gt; [</span><span class="color-gold">0</span><span class="color-white">: bb4, otherwise: bb5]; </span><span class="color-gray">// scope 3 at src/main.rs:7:12: 7:39</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">77</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">78</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">79</span><span class="code-fence-code"><span class="color-white">    bb4: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">80</span><span class="code-fence-code"><span class="color-white">        StorageDead(</span><span class="color-gold">_13</span><span class="color-white">);                </span><span class="color-gray">// scope 3 at src/main.rs:7:12: 7:39</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">81</span><span class="code-fence-code"><span class="color-white">        StorageLive(</span><span class="color-gold">_15</span><span class="color-white">);                </span><span class="color-gray">// scope 3 at src/main.rs:8:17: 8:18</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">82</span><span class="code-fence-code">        <span class="color-gold">_16 </span><span class="color-white">= </span><span class="color-violet">const </span><span class="color-gold">false</span><span class="color-white">;               </span><span class="color-gray">// scope 3 at src/main.rs:8:17: 8:18</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">83</span><span class="code-fence-code">        <span class="color-gold">_15 </span><span class="color-white">= </span><span class="color-violet">move </span><span class="color-gold">_7</span><span class="color-white">;                   </span><span class="color-gray">// scope 3 at src/main.rs:8:17: 8:18</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">84</span><span class="code-fence-code">        <span class="color-emerald">drop</span><span class="color-white">(</span><span class="color-gold">_1</span><span class="color-white">) -&gt; [</span><span class="color-violet">return</span><span class="color-white">: bb12, unwind: bb11]; </span><span class="color-gray">// scope 3 at src/main.rs:8:13: 8:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">85</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">86</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">87</span><span class="code-fence-code"><span class="color-white">    bb5: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">88</span><span class="code-fence-code"><span class="color-white">        StorageDead(</span><span class="color-gold">_13</span><span class="color-white">);                </span><span class="color-gray">// scope 3 at src/main.rs:7:12: 7:39</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">89</span><span class="code-fence-code"><span class="color-white">        goto -&gt; bb6;                     </span><span class="color-gray">// scope 3 at src/main.rs:7:9: 9:10</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">90</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">91</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">92</span><span class="code-fence-code"><span class="color-white">    bb6: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">93</span><span class="code-fence-code"><span class="color-white">        switchInt(</span><span class="color-gold">_16</span><span class="color-white">) -&gt; [</span><span class="color-gold">0</span><span class="color-white">: bb7, otherwise: bb13]; </span><span class="color-gray">// scope 1 at src/main.rs:11:5: 11:6</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">94</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">95</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">96</span><span class="code-fence-code"><span class="color-white">    bb7: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">97</span><span class="code-fence-code"><span class="color-white">        StorageDead(</span><span class="color-gold">_7</span><span class="color-white">);                 </span><span class="color-gray">// scope 1 at src/main.rs:11:5: 11:6</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">98</span><span class="code-fence-code">        <span class="color-emerald">drop</span><span class="color-white">(</span><span class="color-gold">_1</span><span class="color-white">) -&gt; bb8;                 </span><span class="color-gray">// scope 0 at src/main.rs:12:1: 12:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">99</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">100</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">101</span><span class="code-fence-code"><span class="color-white">    bb8: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">102</span><span class="code-fence-code"><span class="color-white">        StorageDead(</span><span class="color-gold">_1</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at src/main.rs:12:1: 12:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">103</span><span class="code-fence-code">        <span class="color-violet">return</span><span class="color-white">;                          </span><span class="color-gray">// scope 0 at src/main.rs:12:2: 12:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">104</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">105</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">106</span><span class="code-fence-code"><span class="color-white">    bb9 (cleanup): {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">107</span><span class="code-fence-code">        <span class="color-emerald">drop</span><span class="color-white">(</span><span class="color-gold">_1</span><span class="color-white">) -&gt; bb10;                </span><span class="color-gray">// scope 0 at src/main.rs:12:1: 12:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">108</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">109</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">110</span><span class="code-fence-code"><span class="color-white">    bb10 (cleanup): {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">111</span><span class="code-fence-code"><span class="color-white">        resume;                          </span><span class="color-gray">// scope 0 at src/main.rs:1:1: 12:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">112</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">113</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">114</span><span class="code-fence-code"><span class="color-white">    bb11 (cleanup): {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">115</span><span class="code-fence-code">        <span class="color-gold">_1 </span><span class="color-white">= </span><span class="color-violet">move </span><span class="color-gold">_15</span><span class="color-white">;                   </span><span class="color-gray">// scope 3 at src/main.rs:8:13: 8:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">116</span><span class="code-fence-code"><span class="color-white">        goto -&gt; bb15;                    </span><span class="color-gray">// scope 3 at src/main.rs:8:13: 8:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">117</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">118</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">119</span><span class="code-fence-code"><span class="color-white">    bb12: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">120</span><span class="code-fence-code">        <span class="color-gold">_1 </span><span class="color-white">= </span><span class="color-violet">move </span><span class="color-gold">_15</span><span class="color-white">;                   </span><span class="color-gray">// scope 3 at src/main.rs:8:13: 8:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">121</span><span class="code-fence-code"><span class="color-white">        StorageDead(</span><span class="color-gold">_15</span><span class="color-white">);                </span><span class="color-gray">// scope 3 at src/main.rs:8:17: 8:18</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">122</span><span class="code-fence-code"><span class="color-white">        goto -&gt; bb6;                     </span><span class="color-gray">// scope 3 at src/main.rs:7:9: 9:10</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">123</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">124</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">125</span><span class="code-fence-code"><span class="color-white">    bb13: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">126</span><span class="code-fence-code">        <span class="color-emerald">drop</span><span class="color-white">(</span><span class="color-gold">_7</span><span class="color-white">) -&gt; [</span><span class="color-violet">return</span><span class="color-white">: bb7, unwind: bb9]; </span><span class="color-gray">// scope 1 at src/main.rs:11:5: 11:6</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">127</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">128</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">129</span><span class="code-fence-code"><span class="color-white">    bb14 (cleanup): {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">130</span><span class="code-fence-code">        <span class="color-emerald">drop</span><span class="color-white">(</span><span class="color-gold">_7</span><span class="color-white">) -&gt; bb9;                 </span><span class="color-gray">// scope 1 at src/main.rs:11:5: 11:6</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">131</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">132</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">133</span><span class="code-fence-code"><span class="color-white">    bb15 (cleanup): {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">134</span><span class="code-fence-code"><span class="color-white">        switchInt(</span><span class="color-gold">_16</span><span class="color-white">) -&gt; [</span><span class="color-gold">0</span><span class="color-white">: bb9, otherwise: bb14]; </span><span class="color-gray">// scope 1 at src/main.rs:11:5: 11:6</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">135</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">136</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">137</span><span class="code-fence-code"><span class="color-white">    bb16: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">138</span><span class="code-fence-code"><span class="color-white">        StorageDead(</span><span class="color-gold">_2</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:55:9: 55:10</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">139</span><span class="code-fence-code"><span class="color-white">        StorageLive(</span><span class="color-gold">_7</span><span class="color-white">);                 </span><span class="color-gray">// scope 1 at src/main.rs:5:13: 5:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">140</span><span class="code-fence-code"><span class="color-white">        StorageLive(</span><span class="color-gold">_8</span><span class="color-white">);                 </span><span class="color-gray">// scope 1 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">141</span><span class="code-fence-code">        <span class="color-gold">_9 </span><span class="color-white">= </span><span class="color-violet">const </span><span class="color-gold">16_</span><span class="color-violet">usize</span><span class="color-white">;             </span><span class="color-gray">// scope 4 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">142</span><span class="code-fence-code">        <span class="color-gold">_10 </span><span class="color-white">= </span><span class="color-violet">const </span><span class="color-gold">4_</span><span class="color-violet">usize</span><span class="color-white">;             </span><span class="color-gray">// scope 4 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">143</span><span class="code-fence-code">        <span class="color-gold">_11 </span><span class="color-white">= alloc::alloc::exchange_malloc(</span><span class="color-violet">move </span><span class="color-gold">_9</span><span class="color-white">, </span><span class="color-violet">move </span><span class="color-gold">_10</span><span class="color-white">) -&gt; [</span><span class="color-violet">return</span><span class="color-white">: bb2, unwind: bb9]; </span><span class="color-gray">// scope 4 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">144</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">145</span><span class="code-fence-code">                                         <span class="color-gray">// + span: /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">146</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: unsafe fn(usize, usize) -&gt; *mut u8 {alloc::alloc::exchange_malloc}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">147</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">148</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">149</span><span class="code-fence-code"><span class="color-white">    bb17: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">150</span><span class="code-fence-code">        <span class="color-gold">_16 </span><span class="color-white">= </span><span class="color-violet">const </span><span class="color-gold">true</span><span class="color-white">;                </span><span class="color-gray">// scope 1 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:55:9: 55:10</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">151</span><span class="code-fence-code"><span class="color-white">        StorageDead(</span><span class="color-gold">_8</span><span class="color-white">);                 </span><span class="color-gray">// scope 1 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:55:9: 55:10</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">152</span><span class="code-fence-code"><span class="color-white">        StorageLive(</span><span class="color-gold">_13</span><span class="color-white">);                </span><span class="color-gray">// scope 3 at src/main.rs:7:12: 7:34</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">153</span><span class="code-fence-code"><span class="color-white">        StorageLive(</span><span class="color-gold">_14</span><span class="color-white">);                </span><span class="color-gray">// scope 3 at src/main.rs:7:12: 7:30</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">154</span><span class="code-fence-code">        <span class="color-gold">_14 </span><span class="color-white">= </span><span class="color-emerald">id</span><span class="color-white">() -&gt; [</span><span class="color-violet">return</span><span class="color-white">: bb3, unwind: bb15]; </span><span class="color-gray">// scope 3 at src/main.rs:7:12: 7:30</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">155</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">156</span><span class="code-fence-code">                                         <span class="color-gray">// + span: src/main.rs:7:12: 7:28</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">157</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: fn() -&gt; u32 {id}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">158</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">159</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(13)" class="copy-fenced-code">Copy</button></pre><p><code class="inline-code-span">_16</code> is the key here. The comment says <code class="inline-code-span">_16</code> is at <code class="inline-code-span">main.rs:11:5: 11:6</code>, but we don&apos;t see anything there. It&apos;s the special flag that MIR created to track the lifetime of <code class="inline-code-span">y</code> dynamically. You can see how it works in the Control Flow Graph below.</p><pre class="fenced-code-block"><code><span class="code-fence-row"><span class="code-fence-code">╭─────────────────────────────╮</span></span>
<span class="code-fence-row"><span class="code-fence-code">│  bb0 -&gt; bb1 -&gt; bb16 -&gt; bb2  │</span></span>
<span class="code-fence-row"><span class="code-fence-code">│         init x and y        │</span></span>
<span class="code-fence-row"><span class="code-fence-code">╰─────────────────────────────╯</span></span>
<span class="code-fence-row"><span class="code-fence-code">           │</span></span>
<span class="code-fence-row"><span class="code-fence-code">           V</span></span>
<span class="code-fence-row"><span class="code-fence-code">╭────────────────────╮            ╭────────────────╮</span></span>
<span class="code-fence-row"><span class="code-fence-code">│     bb17 -&gt; bb3    │    true    │       bb4      │</span></span>
<span class="code-fence-row"><span class="code-fence-code">│  _16 = true;       │ ─────────&gt; │  _16 = false;  │</span></span>
<span class="code-fence-row"><span class="code-fence-code">│  if id() % 2 == 0  │            │  drop(y);      │</span></span>
<span class="code-fence-row"><span class="code-fence-code">╰────────────────────╯            ╰────────────────╯</span></span>
<span class="code-fence-row"><span class="code-fence-code">         │                             │</span></span>
<span class="code-fence-row"><span class="code-fence-code">         │ false                       │</span></span>
<span class="code-fence-row"><span class="code-fence-code">         V                             V</span></span>
<span class="code-fence-row"><span class="code-fence-code">     ╭───────╮                    ╭──────────╮</span></span>
<span class="code-fence-row"><span class="code-fence-code">     │  bb5  │                    │   bb12   │</span></span>
<span class="code-fence-row"><span class="code-fence-code">     ╰───────╯                    │  y = x;  │</span></span>
<span class="code-fence-row"><span class="code-fence-code">         │                        ╰──────────╯</span></span>
<span class="code-fence-row"><span class="code-fence-code">         │                             │</span></span>
<span class="code-fence-row"><span class="code-fence-code">         │                             │</span></span>
<span class="code-fence-row"><span class="code-fence-code">         │   ╭──────────────────╮      │</span></span>
<span class="code-fence-row"><span class="code-fence-code">         ╰─&gt; │        bb6       │ &lt;────╯</span></span>
<span class="code-fence-row"><span class="code-fence-code">             │  if _16 == true  │</span></span>
<span class="code-fence-row"><span class="code-fence-code">             ╰──────────────────╯</span></span>
<span class="code-fence-row"><span class="code-fence-code">                 │          │ false</span></span>
<span class="code-fence-row"><span class="code-fence-code">            true │          ╰─────╮</span></span>
<span class="code-fence-row"><span class="code-fence-code">                 V                V</span></span>
<span class="code-fence-row"><span class="code-fence-code">      ╭────────────╮          ╭────────────╮</span></span>
<span class="code-fence-row"><span class="code-fence-code">      │     bb7    │ &lt;─────── │    bb13    │</span></span>
<span class="code-fence-row"><span class="code-fence-code">      │  drop(y);  │          │  drop(x);  │</span></span>
<span class="code-fence-row"><span class="code-fence-code">      ╰────────────╯          ╰────────────╯</span></span>
<span class="code-fence-row"><span class="code-fence-code">               │</span></span>
<span class="code-fence-row"><span class="code-fence-code">               │</span></span>
<span class="code-fence-row"><span class="code-fence-code">               V</span></span>
<span class="code-fence-row"><span class="code-fence-code">            ╭──────────╮</span></span>
<span class="code-fence-row"><span class="code-fence-code">            │    bb8   │</span></span>
<span class="code-fence-row"><span class="code-fence-code">            │  return  │</span></span>
<span class="code-fence-row"><span class="code-fence-code">            ╰──────────╯</span></span>
</code></pre><p>It sets <code class="inline-code-span">_16</code> to <code class="inline-code-span">false</code> when <code class="inline-code-span">y</code> is dropped. It checks <code class="inline-code-span">_16</code> before exiting the function.</p><h3 id="terminators">Terminators</h3><p>So far, we have seen many kinds of terminators. A statement is a terminator if and only if it&apos;s the last statement of a basic block. You can see the exhaustive list of terminator kinds <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.TerminatorKind.html">here</a>.</p><p><a id="terminatorkind"></a></p><p>If a block has only one successor, it has a <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.TerminatorKind.html#variant.Goto">Goto</a> terminator (line 35 of <a href="#mirex4">this</a> example). A condtion of an <code class="inline-code-span">if</code> branch usually uses a <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.TerminatorKind.html#variant.SwitchInt">switchInt</a> terminator (line 30 of <a href="#mirex4">this</a> example). <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.TerminatorKind.html#variant.Return">Return</a> literally returns from the current function (line 45 of <a href="#mirex4">this</a> example). A function call in MIR always terminates a basic block. It uses <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.TerminatorKind.html#variant.Call">this</a> terminator (line 9 of <a href="#mirex4">this</a> example and line 67 of <a href="#mirex2">this</a> example). If a basic block terminates with a function call, it may have 1 or 2 successors. If the function panics, it has to unwind the stack and call destructors. For panic-able functions, the terminator has a successor for stack unwinding.</p><p><br/></p><h3 id="appendix-implementation-of-mir">Appendix: implementation of MIR</h3><p><a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/context/struct.GlobalCtxt.html">GlobalCtxt</a> is the central data structure that contains all the information of a compilation. It&apos;s such a gigantic type and looking at the details of the type is way beyond this article&apos;s topic. I&apos;ll focus on types that are related to this article.</p><p><a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Body.html">Body</a> is the type that contains all the information of a function, including the <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Body.html#structfield.basic_blocks">basic_blocks</a>. A basic block has <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlockData.html">BasicBlockData</a>, which literally contains the data of it. A <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlockData.html">BasicBlockData</a> consists of <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Statement.html">Statement</a>s and a <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/terminator/struct.Terminator.html">Terminator</a>.</p><p><a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.StatementKind.html">StatementKind</a> and <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.TerminatorKind.html">TerminatorKind</a> lists all the possible kinds of statements and terminators. <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.StatementKind.html">StatementKind</a> includes <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.StatementKind.html#variant.Assign">assignment</a>, <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.StatementKind.html#variant.StorageLive">StorageLive</a> and <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.StatementKind.html#variant.StorageDead">StorageDead</a>. We&apos;ve seen them in this article. I explained <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.TerminatorKind.html">TerminatorKind</a> <a href="#terminatorkind">here</a>.</p><p>Locals of a <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Body.html">Body</a> are stored in <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Body.html#structfield.local_decls">local_decls</a>. Information of a local is defined in <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.LocalDecl.html">LocalDecl</a>.</p><p>Debug information (like the one at line 22 of <a href="#mirex4">this</a> example) of user defined variables are stored <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Body.html#structfield.var_debug_info">here</a>. <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.VarDebugInfo.html">VarDebugInfo</a> is the structing containing the debug info.</p><hr class="footnote-hr"/><div class="mdxt-footnote-cites"><p><div class="footnote-cite"><a id="footnote-cite-0"></a><a href="#footnote-ref-0"> [0]</a> <a href="#footnote-ref-1"> [1]</a> <a href="#footnote-ref-2"> [2]</a> <a href="#footnote-ref-3"> [3]</a> I didn&apos;t include the line number, cause it may change over time.</div></p></div><script>/*<![CDATA[*/
const fenced_code_block_contents = ["", "fn main() {\n    for i in 1..200 {\n        if i % 15 == 0 { println!(\"fizzbuzz\"); }\n        else if i % 3 == 0 { println!(\"fizz\"); }\n        else if i % 5 == 0 { println!(\"buzz\"); }\n        else { println!(\"{i}\"); }\n    }\n}", "#[prelude_import]\nuse std::prelude::rust_2021::*;\n#[macro_use]\nextern crate std;\nfn main() {\n    {\n        let _t = match #[lang = \"into_iter\"](#[lang = \"Range\"]{ start: 1, end: 200, }) {\n            mut iter => loop {\n                match #[lang = \"next\"](&mut iter) {\n                    #[lang = \"None\"] {} => break,\n                    #[lang = \"Some\"] {  0: i } => {\n                        if i % 15 == 0 { {\n                            ::std::io::_print(<#[lang = \"format_arguments\"]>::new_const(&[\"fizzbuzz\\n\"]));\n                        }; }\n\n                        else if i % 3 == 0 { {\n                            ::std::io::_print(<#[lang = \"format_arguments\"]>::new_const(&[\"fizz\\n\"]));\n                        }; }\n\n                        else if i % 5 == 0 { {\n                            ::std::io::_print(<#[lang = \"format_arguments\"]>::new_const(&[\"buzz\\n\"]));\n                        }; }\n\n                        else { {\n                            ::std::io::_print(\n                                <#[lang = \"format_arguments\"]>::new_v1(\n                                    &[\"\", \"\\n\"],\n                                    &[<#[lang = \"format_argument\"]>::new_display(&i)])\n                                );\n                        }; }\n                    }\n                }\n            },\n        };\n\n        _t\n    }\n}", "fn main() {\n    let mut a = vec![1, 2, 3, 4];\n    a.push(5);\n}", "#[prelude_import]\nuse std::prelude::rust_2021::*;\n#[macro_use]\nextern crate std;\n\nfn main() {\n    let mut a = <[_]>::into_vec(\n        #[rustc_box] ::alloc::boxed::Box::new([1, 2, 3, 4])\n    );\n\n    a.push(5);\n}", "// WARNING: This output format is intended for human consumers only\n// and is subject to change without notice. Knock yourself out.\nfn main() -> () {\n    let mut _0: ();                      // return place in scope 0 at src/main.rs:1:11: 1:11\n    let mut _1: std::vec::Vec<i32>;      // in scope 0 at src/main.rs:2:9: 2:14\n    let mut _2: std::boxed::Box<[i32]>;  // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _3: usize;                   // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _4: usize;                   // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _5: *mut u8;                 // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _6: std::boxed::Box<[i32; 4]>; // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let _7: ();                          // in scope 0 at src/main.rs:3:5: 3:14\n    let mut _8: &mut std::vec::Vec<i32>; // in scope 0 at src/main.rs:3:5: 3:14\n    let mut _9: *const [i32; 4];         // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _10: *const ();              // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n    let mut _11: usize;                  // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n    let mut _12: usize;                  // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n    let mut _13: usize;                  // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n    let mut _14: usize;                  // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n    let mut _15: bool;                   // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n    scope 1 {\n        debug a => _1;                   // in scope 1 at src/main.rs:2:9: 2:14\n    }\n    scope 2 {\n    }\n\n    bb0: {\n        _3 = SizeOf([i32; 4]);           // scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n        _4 = AlignOf([i32; 4]);          // scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n        _5 = alloc::alloc::exchange_malloc(move _3, move _4) -> bb1; // scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n                                         // mir::Constant\n                                         // + span: /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n                                         // + literal: Const { ty: unsafe fn(usize, usize) -> *mut u8 {alloc::alloc::exchange_malloc}, val: Value(<ZST>) }\n    }\n\n    bb1: {\n        _6 = ShallowInitBox(move _5, [i32; 4]); // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n        _9 = (((_6.0: std::ptr::Unique<[i32; 4]>).0: std::ptr::NonNull<[i32; 4]>).0: *const [i32; 4]); // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        _10 = _9 as *const () (PtrToPtr); // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        _11 = _10 as usize (Transmute);  // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        _12 = AlignOf(i32);              // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        _13 = Sub(_12, const 1_usize);   // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        _14 = BitAnd(_11, _13);          // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        _15 = Eq(_14, const 0_usize);    // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        assert(_15, \"misaligned pointer dereference: address must be a multiple of {} but is {}\", _12, _11) -> [success: bb7, unwind terminate]; // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n    }\n\n    bb2: {\n        _8 = &mut _1;                    // scope 1 at src/main.rs:3:5: 3:14\n        _7 = Vec::<i32>::push(move _8, const 5_i32) -> [return: bb3, unwind: bb5]; // scope 1 at src/main.rs:3:5: 3:14\n                                         // mir::Constant\n                                         // + span: src/main.rs:3:7: 3:11\n                                         // + literal: Const { ty: for<'a> fn(&'a mut Vec<i32>, i32) {Vec::<i32>::push}, val: Value(<ZST>) }\n    }\n\n    bb3: {\n        drop(_1) -> bb4;                 // scope 0 at src/main.rs:4:1: 4:2\n    }\n\n    bb4: {\n        return;                          // scope 0 at src/main.rs:4:2: 4:2\n    }\n\n    bb5 (cleanup): {\n        drop(_1) -> [return: bb6, unwind terminate]; // scope 0 at src/main.rs:4:1: 4:2\n    }\n\n    bb6 (cleanup): {\n        resume;                          // scope 0 at src/main.rs:1:1: 4:2\n    }\n\n    bb7: {\n        (*_9) = [const 1_i32, const 2_i32, const 3_i32, const 4_i32]; // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        _2 = move _6 as std::boxed::Box<[i32]> (Pointer(Unsize)); // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n        _1 = slice::<impl [i32]>::into_vec::<std::alloc::Global>(move _2) -> bb2; // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:50:36: 55:10\n                                         // mir::Constant\n                                         // + span: /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:50:36: 50:51\n                                         // + user_ty: UserType(0)\n                                         // + literal: Const { ty: fn(Box<[i32]>) -> Vec<i32> {slice::<impl [i32]>::into_vec::<std::alloc::Global>}, val: Value(<ZST>) }\n    }\n}", "// WARNING: This output format is intended for human consumers only\n// and is subject to change without notice. Knock yourself out.\nfn main() -> () {\n    let mut _0: ();                      // return place in scope 0 at src/main.rs:1:11: 1:11\n    let mut _1: std::vec::Vec<i32>;      // in scope 0 at src/main.rs:2:9: 2:14\n    let mut _2: std::boxed::Box<[i32]>;  // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _3: usize;                   // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _4: usize;                   // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _5: *mut u8;                 // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _6: std::boxed::Box<[i32; 4]>; // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let _7: ();                          // in scope 0 at src/main.rs:3:5: 3:14\n    let mut _8: &mut std::vec::Vec<i32>; // in scope 0 at src/main.rs:3:5: 3:14\n    let mut _9: *const [i32; 4];         // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    scope 1 {\n        debug a => _1;                   // in scope 1 at src/main.rs:2:9: 2:14\n    }\n    scope 2 {\n    }\n    scope 3 (inlined slice::<impl [i32]>::into_vec::<std::alloc::Global>) { // at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:50:36: 55:10\n        debug self => _2;                // in scope 3 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/slice.rs:461:35: 461:39\n    }\n\n    bb0: {\n        StorageLive(_1);                 // scope 0 at src/main.rs:2:9: 2:14\n        StorageLive(_2);                 // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n        _3 = const 16_usize;             // scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n        _4 = const 4_usize;              // scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n        _5 = alloc::alloc::exchange_malloc(move _3, move _4) -> bb1; // scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n                                         // mir::Constant\n                                         // + span: /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n                                         // + literal: Const { ty: unsafe fn(usize, usize) -> *mut u8 {alloc::alloc::exchange_malloc}, val: Value(<ZST>) }\n    }\n\n    bb1: {\n        _6 = ShallowInitBox(move _5, [i32; 4]); // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n        _9 = (((_6.0: std::ptr::Unique<[i32; 4]>).0: std::ptr::NonNull<[i32; 4]>).0: *const [i32; 4]); // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        (*_9) = [const 1_i32, const 2_i32, const 3_i32, const 4_i32]; // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        _2 = move _6 as std::boxed::Box<[i32]> (Pointer(Unsize)); // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n        _1 = slice::hack::into_vec::<i32, std::alloc::Global>(move _2) -> bb6; // scope 3 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/slice.rs:463:9: 463:29\n                                         // mir::Constant\n                                         // + span: /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/slice.rs:463:9: 463:23\n                                         // + literal: Const { ty: fn(Box<[i32]>) -> Vec<i32> {slice::hack::into_vec::<i32, std::alloc::Global>}, val: Value(<ZST>) }\n    }\n\n    bb2: {\n        StorageDead(_8);                 // scope 1 at src/main.rs:3:13: 3:14\n        drop(_1) -> bb3;                 // scope 0 at src/main.rs:4:1: 4:2\n    }\n\n    bb3: {\n        StorageDead(_1);                 // scope 0 at src/main.rs:4:1: 4:2\n        return;                          // scope 0 at src/main.rs:4:2: 4:2\n    }\n\n    bb4 (cleanup): {\n        drop(_1) -> [return: bb5, unwind terminate]; // scope 0 at src/main.rs:4:1: 4:2\n    }\n\n    bb5 (cleanup): {\n        resume;                          // scope 0 at src/main.rs:1:1: 4:2\n    }\n\n    bb6: {\n        StorageDead(_2);                 // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:55:9: 55:10\n        StorageLive(_8);                 // scope 1 at src/main.rs:3:5: 3:14\n        _8 = &mut _1;                    // scope 1 at src/main.rs:3:5: 3:14\n        _7 = Vec::<i32>::push(move _8, const 5_i32) -> [return: bb2, unwind: bb4]; // scope 1 at src/main.rs:3:5: 3:14\n                                         // mir::Constant\n                                         // + span: src/main.rs:3:7: 3:11\n                                         // + literal: Const { ty: for<'a> fn(&'a mut Vec<i32>, i32) {Vec::<i32>::push}, val: Value(<ZST>) }\n    }\n}", "fn main() {\n    add(3, 4);\n}\n\nfn foo(a: i32, b: i32) -> i32 {\n    if a > b { a + 1 } else { b + 1}\n}", "// WARNING: This output format is intended for human consumers only\n// and is subject to change without notice. Knock yourself out.\nfn main() -> () {\n    let mut _0: ();                      // return place in scope 0 at src/main.rs:1:11: 1:11\n    let _1: i32;                         // in scope 0 at src/main.rs:2:5: 2:14\n\n    bb0: {\n        _1 = foo(const 3_i32, const 4_i32) -> bb1; // scope 0 at src/main.rs:2:5: 2:14\n                                         // mir::Constant\n                                         // + span: src/main.rs:2:5: 2:8\n                                         // + literal: Const { ty: fn(i32, i32) -> i32 {foo}, val: Value(<ZST>) }\n    }\n\n    bb1: {\n        return;                          // scope 0 at src/main.rs:3:2: 3:2\n    }\n}\n\nfn foo(_1: i32, _2: i32) -> i32 {\n    debug a => _1;                       // in scope 0 at src/main.rs:5:8: 5:9\n    debug b => _2;                       // in scope 0 at src/main.rs:5:16: 5:17\n    let mut _0: i32;                     // return place in scope 0 at src/main.rs:5:27: 5:30\n    let mut _3: bool;                    // in scope 0 at src/main.rs:6:8: 6:13\n    let mut _4: (i32, bool);             // in scope 0 at src/main.rs:6:16: 6:21\n    let mut _5: (i32, bool);             // in scope 0 at src/main.rs:6:31: 6:36\n\n    bb0: {\n        _3 = Gt(_1, _2);                 // scope 0 at src/main.rs:6:8: 6:13\n        switchInt(move _3) -> [0: bb3, otherwise: bb1]; // scope 0 at src/main.rs:6:8: 6:13\n    }\n\n    bb1: {\n        _4 = CheckedAdd(_1, const 1_i32); // scope 0 at src/main.rs:6:16: 6:21\n        assert(!move (_4.1: bool), \"attempt to compute `{} + {}`, which would overflow\", _1, const 1_i32) -> bb2; // scope 0 at src/main.rs:6:16: 6:21\n    }\n\n    bb2: {\n        _0 = move (_4.0: i32);           // scope 0 at src/main.rs:6:16: 6:21\n        goto -> bb5;                     // scope 0 at src/main.rs:6:5: 6:37\n    }\n\n    bb3: {\n        _5 = CheckedAdd(_2, const 1_i32); // scope 0 at src/main.rs:6:31: 6:36\n        assert(!move (_5.1: bool), \"attempt to compute `{} + {}`, which would overflow\", _2, const 1_i32) -> bb4; // scope 0 at src/main.rs:6:31: 6:36\n    }\n\n    bb4: {\n        _0 = move (_5.0: i32);           // scope 0 at src/main.rs:6:31: 6:36\n        goto -> bb5;                     // scope 0 at src/main.rs:6:5: 6:37\n    }\n\n    bb5: {\n        return;                          // scope 0 at src/main.rs:7:2: 7:2\n    }\n}\n", "// WARNING: This output format is intended for human consumers only\n// and is subject to change without notice. Knock yourself out.\nfn main() -> () {\n    let mut _0: ();                      // return place in scope 0 at src/main.rs:1:11: 1:11\n    let _1: i32;                         // in scope 0 at src/main.rs:2:5: 2:14\n\n    bb0: {\n        StorageLive(_1);                 // scope 0 at src/main.rs:2:5: 2:14\n        _1 = foo(const 3_i32, const 4_i32) -> bb1; // scope 0 at src/main.rs:2:5: 2:14\n                                         // mir::Constant\n                                         // + span: src/main.rs:2:5: 2:8\n                                         // + literal: Const { ty: fn(i32, i32) -> i32 {foo}, val: Value(<ZST>) }\n    }\n\n    bb1: {\n        StorageDead(_1);                 // scope 0 at src/main.rs:2:14: 2:15\n        return;                          // scope 0 at src/main.rs:3:2: 3:2\n    }\n}\n\nfn foo(_1: i32, _2: i32) -> i32 {\n    debug a => _1;                       // in scope 0 at src/main.rs:5:8: 5:9\n    debug b => _2;                       // in scope 0 at src/main.rs:5:16: 5:17\n    let mut _0: i32;                     // return place in scope 0 at src/main.rs:5:27: 5:30\n    let mut _3: bool;                    // in scope 0 at src/main.rs:6:8: 6:13\n\n    bb0: {\n        StorageLive(_3);                 // scope 0 at src/main.rs:6:8: 6:13\n        _3 = Gt(_1, _2);                 // scope 0 at src/main.rs:6:8: 6:13\n        switchInt(move _3) -> [0: bb2, otherwise: bb1]; // scope 0 at src/main.rs:6:8: 6:13\n    }\n\n    bb1: {\n        _0 = Add(_1, const 1_i32);       // scope 0 at src/main.rs:6:16: 6:21\n        goto -> bb3;                     // scope 0 at src/main.rs:6:5: 6:37\n    }\n\n    bb2: {\n        _0 = Add(_2, const 1_i32);       // scope 0 at src/main.rs:6:31: 6:36\n        goto -> bb3;                     // scope 0 at src/main.rs:6:5: 6:37\n    }\n\n    bb3: {\n        StorageDead(_3);                 // scope 0 at src/main.rs:6:36: 6:37\n        return;                          // scope 0 at src/main.rs:7:2: 7:2\n    }\n}", "", "// WARNING: This output format is intended for human consumers only\n// and is subject to change without notice. Knock yourself out.\nfn main() -> () {\n    let mut _0: ();                      // return place in scope 0 at src/main.rs:1:11: 1:11\n    let _1: ();                          // in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:9: 137:62\n    let mut _2: std::fmt::Arguments<'_>; // in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61\n    let mut _3: &[&str];                 // in scope 0 at src/main.rs:2:14: 2:28\n    let mut _4: &[core::fmt::ArgumentV1<'_>]; // in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61\n    let mut _5: &[core::fmt::ArgumentV1<'_>; 0]; // in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61\n    let mut _6: &[&str; 1];              // in scope 0 at src/main.rs:2:14: 2:28\n\n    bb0: {\n        _6 = const _;                    // scope 0 at src/main.rs:2:14: 2:28\n                                         // mir::Constant\n                                         // + span: src/main.rs:2:14: 2:28\n                                         // + literal: Const { ty: &[&str; 1], val: Unevaluated(main, [], Some(promoted[1])) }\n        _3 = _6 as &[&str] (Pointer(Unsize)); // scope 0 at src/main.rs:2:14: 2:28\n        _5 = const _;                    // scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61\n                                         // mir::Constant\n                                         // + span: /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61\n                                         // + literal: Const { ty: &[core::fmt::ArgumentV1<'_>; 0], val: Unevaluated(main, [], Some(promoted[0])) }\n        _4 = _5 as &[core::fmt::ArgumentV1<'_>] (Pointer(Unsize)); // scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61\n        _2 = Arguments::<'_>::new_v1(move _3, move _4) -> bb1; // scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61\n                                         // mir::Constant\n                                         // + span: /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61\n                                         // + user_ty: UserType(0)\n                                         // + literal: Const { ty: fn(&[&'static str], &[core::fmt::ArgumentV1<'_>]) -> Arguments<'_> {Arguments::<'_>::new_v1}, val: Value(<ZST>) }\n    }\n\n    bb1: {\n        _1 = _print(move _2) -> bb2;     // scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:9: 137:62\n                                         // mir::Constant\n                                         // + span: /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:9: 137:27\n                                         // + literal: Const { ty: for<'a> fn(Arguments<'a>) {_print}, val: Value(<ZST>) }\n    }\n\n    bb2: {\n        return;                          // scope 0 at src/main.rs:3:2: 3:2\n    }\n}\n\npromoted[0] in main: &[core::fmt::ArgumentV1<'_>; 0] = {\n    let mut _0: &[core::fmt::ArgumentV1<'_>; 0]; // return place in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61\n    let mut _1: [core::fmt::ArgumentV1<'_>; 0]; // in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61\n\n    bb0: {\n        _1 = [];                         // scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61\n        _0 = &_1;                        // scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61\n        return;                          // scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/macros.rs:137:28: 137:61\n    }\n}\n\npromoted[1] in main: &[&str; 1] = {\n    let mut _0: &[&str; 1];              // return place in scope 0 at src/main.rs:2:14: 2:28\n    let mut _1: [&str; 1];               // in scope 0 at src/main.rs:2:14: 2:28\n\n    bb0: {\n        _1 = [const \"Hello World!\\n\"];   // scope 0 at src/main.rs:2:14: 2:28\n                                         // mir::Constant\n                                         // + span: src/main.rs:2:14: 2:28\n                                         // + literal: Const { ty: &str, val: Value(Slice(..)) }\n        _0 = &_1;                        // scope 0 at src/main.rs:2:14: 2:28\n        return;                          // scope 0 at src/main.rs:2:14: 2:28\n    }\n}", "fn main() {\n    let mut y = vec![1, 2, 3, 4];\n\n    {\n        let x = vec![5, 6, 7, 8];\n\n        if std::process::id() % 2 == 0 {\n            y = x;\n        }\n\n    }\n}", "// WARNING: This output format is intended for human consumers only\n// and is subject to change without notice. Knock yourself out.\nfn main() -> () {\n    let mut _0: ();                      // return place in scope 0 at src/main.rs:1:11: 1:11\n    let mut _1: std::vec::Vec<i32>;      // in scope 0 at src/main.rs:2:9: 2:14\n    let mut _2: std::boxed::Box<[i32]>;  // in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _3: usize;                   // in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _4: usize;                   // in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _5: *mut u8;                 // in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _6: std::boxed::Box<[i32; 4]>; // in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _8: std::boxed::Box<[i32]>;  // in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _9: usize;                   // in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _10: usize;                  // in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _11: *mut u8;                // in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _12: std::boxed::Box<[i32; 4]>; // in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _13: u32;                    // in scope 0 at src/main.rs:7:12: 7:34\n    let mut _14: u32;                    // in scope 0 at src/main.rs:7:12: 7:30\n    let mut _15: std::vec::Vec<i32>;     // in scope 0 at src/main.rs:8:17: 8:18\n    let mut _16: bool;                   // in scope 0 at src/main.rs:11:5: 11:6\n    let mut _17: *const [i32; 4];        // in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _18: *const [i32; 4];        // in scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n    scope 1 {\n        debug y => _1;                   // in scope 1 at src/main.rs:2:9: 2:14\n        let _7: std::vec::Vec<i32>;      // in scope 1 at src/main.rs:5:13: 5:14\n        scope 3 {\n            debug x => _7;               // in scope 3 at src/main.rs:5:13: 5:14\n        }\n        scope 4 {\n        }\n        scope 6 (inlined slice::<impl [i32]>::into_vec::<std::alloc::Global>) { // at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:50:36: 55:10\n            debug self => _8;            // in scope 6 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/slice.rs:461:35: 461:39\n        }\n    }\n    scope 2 {\n    }\n    scope 5 (inlined slice::<impl [i32]>::into_vec::<std::alloc::Global>) { // at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:50:36: 55:10\n        debug self => _2;                // in scope 5 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/slice.rs:461:35: 461:39\n    }\n\n    bb0: {\n        StorageLive(_1);                 // scope 0 at src/main.rs:2:9: 2:14\n        StorageLive(_2);                 // scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n        _3 = const 16_usize;             // scope 2 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n        _4 = const 4_usize;              // scope 2 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n        _5 = alloc::alloc::exchange_malloc(move _3, move _4) -> bb1; // scope 2 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n                                         // mir::Constant\n                                         // + span: /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n                                         // + literal: Const { ty: unsafe fn(usize, usize) -> *mut u8 {alloc::alloc::exchange_malloc}, val: Value(<ZST>) }\n    }\n\n    bb1: {\n        _6 = ShallowInitBox(move _5, [i32; 4]); // scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n        _17 = (((_6.0: std::ptr::Unique<[i32; 4]>).0: std::ptr::NonNull<[i32; 4]>).0: *const [i32; 4]); // scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:37: 54:46\n        (*_17) = [const 1_i32, const 2_i32, const 3_i32, const 4_i32]; // scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:37: 54:46\n        _2 = move _6 as std::boxed::Box<[i32]> (Pointer(Unsize)); // scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n        _1 = slice::hack::into_vec::<i32, std::alloc::Global>(move _2) -> bb16; // scope 5 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/slice.rs:463:9: 463:29\n                                         // mir::Constant\n                                         // + span: /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/slice.rs:463:9: 463:23\n                                         // + literal: Const { ty: fn(Box<[i32]>) -> Vec<i32> {slice::hack::into_vec::<i32, std::alloc::Global>}, val: Value(<ZST>) }\n    }\n\n    bb2: {\n        _12 = ShallowInitBox(move _11, [i32; 4]); // scope 1 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n        _18 = (((_12.0: std::ptr::Unique<[i32; 4]>).0: std::ptr::NonNull<[i32; 4]>).0: *const [i32; 4]); // scope 1 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:37: 54:46\n        (*_18) = [const 5_i32, const 6_i32, const 7_i32, const 8_i32]; // scope 1 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:37: 54:46\n        _8 = move _12 as std::boxed::Box<[i32]> (Pointer(Unsize)); // scope 1 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n        _7 = slice::hack::into_vec::<i32, std::alloc::Global>(move _8) -> [return: bb17, unwind: bb9]; // scope 6 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/slice.rs:463:9: 463:29\n                                         // mir::Constant\n                                         // + span: /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/slice.rs:463:9: 463:23\n                                         // + literal: Const { ty: fn(Box<[i32]>) -> Vec<i32> {slice::hack::into_vec::<i32, std::alloc::Global>}, val: Value(<ZST>) }\n    }\n\n    bb3: {\n        _13 = Rem(move _14, const 2_u32); // scope 3 at src/main.rs:7:12: 7:34\n        StorageDead(_14);                // scope 3 at src/main.rs:7:33: 7:34\n        switchInt(move _13) -> [0: bb4, otherwise: bb5]; // scope 3 at src/main.rs:7:12: 7:39\n    }\n\n    bb4: {\n        StorageDead(_13);                // scope 3 at src/main.rs:7:12: 7:39\n        StorageLive(_15);                // scope 3 at src/main.rs:8:17: 8:18\n        _16 = const false;               // scope 3 at src/main.rs:8:17: 8:18\n        _15 = move _7;                   // scope 3 at src/main.rs:8:17: 8:18\n        drop(_1) -> [return: bb12, unwind: bb11]; // scope 3 at src/main.rs:8:13: 8:14\n    }\n\n    bb5: {\n        StorageDead(_13);                // scope 3 at src/main.rs:7:12: 7:39\n        goto -> bb6;                     // scope 3 at src/main.rs:7:9: 9:10\n    }\n\n    bb6: {\n        switchInt(_16) -> [0: bb7, otherwise: bb13]; // scope 1 at src/main.rs:11:5: 11:6\n    }\n\n    bb7: {\n        StorageDead(_7);                 // scope 1 at src/main.rs:11:5: 11:6\n        drop(_1) -> bb8;                 // scope 0 at src/main.rs:12:1: 12:2\n    }\n\n    bb8: {\n        StorageDead(_1);                 // scope 0 at src/main.rs:12:1: 12:2\n        return;                          // scope 0 at src/main.rs:12:2: 12:2\n    }\n\n    bb9 (cleanup): {\n        drop(_1) -> bb10;                // scope 0 at src/main.rs:12:1: 12:2\n    }\n\n    bb10 (cleanup): {\n        resume;                          // scope 0 at src/main.rs:1:1: 12:2\n    }\n\n    bb11 (cleanup): {\n        _1 = move _15;                   // scope 3 at src/main.rs:8:13: 8:14\n        goto -> bb15;                    // scope 3 at src/main.rs:8:13: 8:14\n    }\n\n    bb12: {\n        _1 = move _15;                   // scope 3 at src/main.rs:8:13: 8:14\n        StorageDead(_15);                // scope 3 at src/main.rs:8:17: 8:18\n        goto -> bb6;                     // scope 3 at src/main.rs:7:9: 9:10\n    }\n\n    bb13: {\n        drop(_7) -> [return: bb7, unwind: bb9]; // scope 1 at src/main.rs:11:5: 11:6\n    }\n\n    bb14 (cleanup): {\n        drop(_7) -> bb9;                 // scope 1 at src/main.rs:11:5: 11:6\n    }\n\n    bb15 (cleanup): {\n        switchInt(_16) -> [0: bb9, otherwise: bb14]; // scope 1 at src/main.rs:11:5: 11:6\n    }\n\n    bb16: {\n        StorageDead(_2);                 // scope 0 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:55:9: 55:10\n        StorageLive(_7);                 // scope 1 at src/main.rs:5:13: 5:14\n        StorageLive(_8);                 // scope 1 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n        _9 = const 16_usize;             // scope 4 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n        _10 = const 4_usize;             // scope 4 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n        _11 = alloc::alloc::exchange_malloc(move _9, move _10) -> [return: bb2, unwind: bb9]; // scope 4 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n                                         // mir::Constant\n                                         // + span: /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:54:13: 54:47\n                                         // + literal: Const { ty: unsafe fn(usize, usize) -> *mut u8 {alloc::alloc::exchange_malloc}, val: Value(<ZST>) }\n    }\n\n    bb17: {\n        _16 = const true;                // scope 1 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:55:9: 55:10\n        StorageDead(_8);                 // scope 1 at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/alloc/src/macros.rs:55:9: 55:10\n        StorageLive(_13);                // scope 3 at src/main.rs:7:12: 7:34\n        StorageLive(_14);                // scope 3 at src/main.rs:7:12: 7:30\n        _14 = id() -> [return: bb3, unwind: bb15]; // scope 3 at src/main.rs:7:12: 7:30\n                                         // mir::Constant\n                                         // + span: src/main.rs:7:12: 7:28\n                                         // + literal: Const { ty: fn() -> u32 {id}, val: Value(<ZST>) }\n    }\n}"];

function copy_code_to_clipboard(index) {
    navigator.clipboard.writeText(fenced_code_block_contents[index]);
}/*]]>*/</script>
        <a id="bottom"></a>
    </article>




    <footer class="markdown">
<p><br/></p><p><br/></p><hr/><div class="align-center"><p>2021 ~ 2023 &copy; Baehyunsol</p></div>
    </footer>


    <script src="colors.js"></script>

    
    <script src="nav.js"></script>
    
    
    
    <script src="header.js"></script>
    
</body>

</html>