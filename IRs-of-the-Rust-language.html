<!DOCTYPE html><html>

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width"/>
    
    <title>IRs-of-the-Rust-language</title>
    
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&amp;display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'"/>
    <!--<link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&amp;display=swap" rel="stylesheet"/> -->
    
    <link href="page.css" rel="stylesheet"/><link href="markdown.css" rel="stylesheet"/><link href="nav.css" rel="stylesheet"/><link href="header.css" rel="stylesheet"/>
    
</head>

<body>


    <header>
<p><div class="topmenu deactivated"><a href="index.html">Home</a> <a href="Articles.html">Articles</a> <a href="Tags.html">Tags</a></div><div class="mobileview"><a id="navbutton">&#9776;</a></div></p>
    </header>



    <nav>
<p><a id="settingsopenbutton">&#9728;</a><a href="#top">&#9650;</a><a href="#bottom">&#9660;</a></p><div id="settingsmenubg"><div id="settingsmenu"><table><thead><tr><th colspan="2"><div class="align-right"> <span class="size-giant"><a id="settingsclosebutton">&#10006;</a></span></div></th></tr></thead><tbody><tr><td><div class="align-right">Theme:</div></td><td><div class="align-left"><a id="changethemebutton">Set Light Theme</a></div></td></tr><tr><td><div class="align-right">Horizontal Padding:</div></td><td><div class="align-left"><a id="growhorizontalbutton">Grow</a> <a id="shrinkhorizontalbutton">Shrink</a></div></td></tr><tr><td><div class="align-right">Font Size:</div></td><td><div class="align-left"><a id="growfontbutton">Grow</a> <a id="shrinkfontbutton">Shrink</a></div></td></tr><tr><td><div class="align-right">Settings:</div></td><td><div class="align-left"><a id="savesettingsbutton">Save All</a> <a id="discardsettingsbutton">Discard All</a></div></td></tr></tbody></table></div></div>
    </nav>


    <article class="markdown">
        <a id="top"></a>
<div class="align-right"><p>Last Updated: 7.May.2023</p><p>Tags: <a href="tag-rust.html">#rust</a>, <a href="tag-compiler.html">#compiler</a></p></div><h1 id="irs-of-the-rust-language">IRs of the Rust language</h1><p>The Rust compiler is very complicated. It consists of many modules, and it takes multiple steps to translate a human-readable programming language to a machine code. Though it&apos;s not necessary for typical programmers to know the internals of the compiler, it&apos;d be very helpful if we understand how the language works. In this article, I&apos;ll take a closer look at the steps the compiler takes.</p><p><a href="https://play.rust-lang.org">Rust playground</a> is an excellent place to play around with the compiler-internals. All the IRs in this article are generated by it. I used Rust-1.71.0-nightly, which is the newest version as I write this article.</p><h2 id="steps-of-the-compilation">Steps of the compilation</h2><p>When a programmer compiles a Rust code, the code goes through below steps.</p><pre class="fenced-code-block"><code><span class="code-fence-row"><span class="code-fence-code">          Rust</span></span>
<span class="code-fence-row"><span class="code-fence-code">           |</span></span>
<span class="code-fence-row"><span class="code-fence-code">           | Lexer, Parser</span></span>
<span class="code-fence-row"><span class="code-fence-code">           V</span></span>
<span class="code-fence-row"><span class="code-fence-code">  Abstract Syntax Tree</span></span>
<span class="code-fence-row"><span class="code-fence-code">           |</span></span>
<span class="code-fence-row"><span class="code-fence-code">           | Rust Compiler</span></span>
<span class="code-fence-row"><span class="code-fence-code">           V</span></span>
<span class="code-fence-row"><span class="code-fence-code">          HIR</span></span>
<span class="code-fence-row"><span class="code-fence-code">           |</span></span>
<span class="code-fence-row"><span class="code-fence-code">           | Rust Compiler</span></span>
<span class="code-fence-row"><span class="code-fence-code">           V</span></span>
<span class="code-fence-row"><span class="code-fence-code">          MIR</span></span>
<span class="code-fence-row"><span class="code-fence-code">           |</span></span>
<span class="code-fence-row"><span class="code-fence-code">           | Rust Compiler</span></span>
<span class="code-fence-row"><span class="code-fence-code">           V</span></span>
<span class="code-fence-row"><span class="code-fence-code">        LLVM IR</span></span>
<span class="code-fence-row"><span class="code-fence-code">           |</span></span>
<span class="code-fence-row"><span class="code-fence-code">           | LLVM</span></span>
<span class="code-fence-row"><span class="code-fence-code">           V</span></span>
<span class="code-fence-row"><span class="code-fence-code">      Machine Code</span></span>
</code></pre><p>First, a <a href="https://en.wikipedia.org/wiki/Lexical_analysis">lexer</a> translates a human-readable code to machine-friendly tokens. The tokens are then translated to <a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree">AST</a> by a <a href="https://en.wikipedia.org/wiki/Parsing#Parser">parser</a>. Lexing, parsing and AST are not Rust-specific concepts, so I won&apos;t discuss them in this article. If you want to know about them, please refer to the wikipedia links in the article.</p><p>The AST is translated to HIR, High-level Intermediate Representation. According to the <a href="https://rustc-dev-guide.rust-lang.org/overview.html">documentation</a>, HIR is a compiler-friendly AST. It resembles the syntax of Rust very closely, except that it&apos;s simplified. HIR is lowered to THIR, Typed High-level Intermediate Representation before converted to MIR. HIR is still quite readable to human. You&apos;ll see that in later sections.</p><p>The next step is MIR, Mid-level Intermediate Representation. It&apos;s a very simplified form. Many optimizations and safety checks are done in this stage. There are <a href="https://blog.rust-lang.org/2016/04/19/MIR.html">blog post</a> and <a href="https://rustc-dev-guide.rust-lang.org/mir/index.html">documents</a> explaining the details of MIR; you&apos;d probably enjoy it.</p><p>After the compiler does Rust-specific analysis and optimizations on MIR, it&apos;s passed to LLVM. From here, everything is up to LLVM, which we&apos;re not interested in.</p><p>Most information in this section is from <a href="https://rustc-dev-guide.rust-lang.org/overview.html">Rust Compiler Overview</a>. Please refer to the document if you want to know more about the compiler.</p><div class="box"><p>Table of contents</p><p>Since this article contains very long lines of code, I provide you a Toc here.</p><p><div class="toc"><ol type="1"><li><a href="#irs-of-the-rust-language">IRs of the Rust language</a><ol type="1"><li><a href="#steps-of-the-compilation">Steps of the compilation</a></li><li><a href="#hir">HIR</a></li><li><a href="#mir">MIR</a><ol type="1"><li><a href="#example-1-push-an-element-to-a-vector">Example 1: Push an element to a vector</a></li><li><a href="#example-2-adder">Example 2: Adder</a></li></ol></li></ol></li></ol></div></p></div><h2 id="hir">HIR</h2><p>There isn&apos;t much change in HIR compared to the original code. Let&apos;s see how the compiler translates the fizz-buzz code below to HIR.</p><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code">    <span class="color-violet">for</span><span class="color-white"> i in </span><span class="color-gold">1</span><span class="color-white">..</span><span class="color-gold">200 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code">        <span class="color-violet">if</span><span class="color-white"> i % </span><span class="color-gold">15 </span><span class="color-white">== </span><span class="color-gold">0 </span><span class="color-white">{ println!(&quot;</span><span class="color-green">fizzbuzz</span><span class="color-white">&quot;); }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">        <span class="color-violet">else if</span><span class="color-white"> i % </span><span class="color-gold">3 </span><span class="color-white">== </span><span class="color-gold">0 </span><span class="color-white">{ println!(&quot;</span><span class="color-green">fizz</span><span class="color-white">&quot;); }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code">        <span class="color-violet">else if</span><span class="color-white"> i % </span><span class="color-gold">5 </span><span class="color-white">== </span><span class="color-gold">0 </span><span class="color-white">{ println!(&quot;</span><span class="color-green">buzz</span><span class="color-white">&quot;); }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code">        <span class="color-violet">else </span><span class="color-white">{ println!(&quot;</span><span class="color-gold">{i}</span><span class="color-white">&quot;); }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(1)" class="copy-fenced-code">Copy</button></pre><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-white">#[</span><span class="color-red">prelude_import</span><span class="color-white">]</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-violet">use </span><span class="color-white">std::prelude::rust_2021::*;</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">#[</span><span class="color-red">macro_use</span><span class="color-white">]</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-violet">extern crate</span><span class="color-white"> std;</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-white">    {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code">        <span class="color-violet">let</span><span class="color-white"> _t = </span><span class="color-violet">match </span><span class="color-white">#[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">into_iter</span><span class="color-white">&quot;](#[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">Range</span><span class="color-white">&quot;]{ start: </span><span class="color-gold">1</span><span class="color-white">, end: </span><span class="color-gold">200</span><span class="color-white">, }) {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">            <span class="color-violet">mut</span><span class="color-white"> iter =&gt; </span><span class="color-violet">loop </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code">                <span class="color-violet">match </span><span class="color-white">#[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">next</span><span class="color-white">&quot;](&amp;</span><span class="color-violet">mut</span><span class="color-white"> iter) {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"><span class="color-white">                    #[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">None</span><span class="color-white">&quot;] {} =&gt; </span><span class="color-violet">break</span><span class="color-white">,</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-white">                    #[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">Some</span><span class="color-white">&quot;] {  </span><span class="color-gold">0</span><span class="color-white">: i } =&gt; {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code">                        <span class="color-violet">if</span><span class="color-white"> i % </span><span class="color-gold">15 </span><span class="color-white">== </span><span class="color-gold">0 </span><span class="color-white">{ {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"><span class="color-white">                            ::std::io::_print(&lt;#[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">format_arguments</span><span class="color-white">&quot;]&gt;::new_const(&amp;[&quot;</span><span class="color-green">fizzbuzz</span><span class="color-emerald">\n</span><span class="color-white">&quot;]));</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code"><span class="color-white">                        }; }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code">                        <span class="color-violet">else if</span><span class="color-white"> i % </span><span class="color-gold">3 </span><span class="color-white">== </span><span class="color-gold">0 </span><span class="color-white">{ {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code"><span class="color-white">                            ::std::io::_print(&lt;#[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">format_arguments</span><span class="color-white">&quot;]&gt;::new_const(&amp;[&quot;</span><span class="color-green">fizz</span><span class="color-emerald">\n</span><span class="color-white">&quot;]));</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code"><span class="color-white">                        }; }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code">                        <span class="color-violet">else if</span><span class="color-white"> i % </span><span class="color-gold">5 </span><span class="color-white">== </span><span class="color-gold">0 </span><span class="color-white">{ {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code"><span class="color-white">                            ::std::io::_print(&lt;#[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">format_arguments</span><span class="color-white">&quot;]&gt;::new_const(&amp;[&quot;</span><span class="color-green">buzz</span><span class="color-emerald">\n</span><span class="color-white">&quot;]));</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">22</span><span class="code-fence-code"><span class="color-white">                        }; }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">23</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">24</span><span class="code-fence-code">                        <span class="color-violet">else </span><span class="color-white">{ {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">25</span><span class="code-fence-code"><span class="color-white">                            ::std::io::_print(</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">26</span><span class="code-fence-code"><span class="color-white">                                &lt;#[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">format_arguments</span><span class="color-white">&quot;]&gt;::new_v1(</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">27</span><span class="code-fence-code"><span class="color-white">                                    &amp;[&quot;&quot;, &quot;</span><span class="color-emerald">\n</span><span class="color-white">&quot;],</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">28</span><span class="code-fence-code"><span class="color-white">                                    &amp;[&lt;#[</span><span class="color-red">lang </span><span class="color-white">= &quot;</span><span class="color-green">format_argument</span><span class="color-white">&quot;]&gt;::new_display(&amp;i)])</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">29</span><span class="code-fence-code"><span class="color-white">                                );</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">30</span><span class="code-fence-code"><span class="color-white">                        }; }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">31</span><span class="code-fence-code"><span class="color-white">                    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">32</span><span class="code-fence-code"><span class="color-white">                }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">33</span><span class="code-fence-code"><span class="color-white">            },</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">34</span><span class="code-fence-code"><span class="color-white">        };</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">35</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">36</span><span class="code-fence-code"><span class="color-white">        _t</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">37</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">38</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(2)" class="copy-fenced-code">Copy</button></pre><p>I ran the compiler in release mode, but the debug mode outputs the same HIR because it doesn&apos;t optimize when generating HIR.</p><p>The first change we notice is an import of preludes. It includes very frequently used names. You can see the exhaustive list of the preludes <a href="https://doc.rust-lang.org/stable/std/prelude/index.html">here</a>. Then, you can see tons of <code class="inline-code-span">#[lang = &quot;XXX&quot;]</code> macros. It looks scary at first, but they are just shortcuts for long names. For example, <code class="inline-code-span">#[lang = &quot;Some&quot;]</code> refers to <code class="inline-code-span">Option::Some&lt;T&gt;</code> defined in the std library. Possible variants of the macro is defined <a href="https://github.com/rust-lang/rust/blob/master/compiler/rustc_hir/src/lang_items.rs">here</a><span id="tooltip-container-0" class="tooltip-container"><span id="footnote-ref-0" class="footnote-ref"><a href="#footnote-cite-0">[0]</a></span><span id="tooltip-message-0" class="tooltip-message">I didn&apos;t include the line number, cause it may change over time.</span></span>. The table is defined at the end of the code. I have no idea why they use such macro, but let&apos;s not get scared. With that in mind, we can understand the above code like below:</p><ol type="1"><li><code class="inline-code-span">1..200</code> is translated to <code class="inline-code-span">Range { start: 1, end: 200 }.into_iter()</code>.</li><li><code class="inline-code-span">Range { start: 1, end: 200 }.into_iter()</code> is assigned to <code class="inline-code-span">iter</code>.</li><li>It turns <code class="inline-code-span">for</code> into <code class="inline-code-span">loop</code>. In each loop, it matches <code class="inline-code-span">iter.next()</code></li><li>If <code class="inline-code-span">iter.next()</code> is <code class="inline-code-span">None</code>, it breaks.</li><li>If <code class="inline-code-span">iter.next()</code> is <code class="inline-code-span">Some(i)</code>, it runs the fizz-buzz code.</li><li><code class="inline-code-span">println!</code> is converted to <code class="inline-code-span">::std::io::_print</code>. You can see the definition of <code class="inline-code-span">_print</code> <a href="https://github.com/rust-lang/rust/blob/master/library/std/src/io/stdio.rs">here</a><span id="tooltip-container-1" class="tooltip-container"><span id="footnote-ref-1" class="footnote-ref"><a href="#footnote-cite-0">[1]</a></span><span id="tooltip-message-1" class="tooltip-message">I didn&apos;t include the line number, cause it may change over time.</span></span>.</li></ol><h2 id="mir">MIR</h2><h3 id="example-1-push-an-element-to-a-vector">Example 1: Push an element to a vector</h3><p>I tried MIR with the fizz-buzz code above, but it was too long. I don&apos;t want you guys to suffer scrolling the endless code, so I&apos;ll use shorter code.</p><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code">    <span class="color-violet">let mut</span><span class="color-white"> a = vec![</span><span class="color-gold">1</span><span class="color-white">, </span><span class="color-gold">2</span><span class="color-white">, </span><span class="color-gold">3</span><span class="color-white">, </span><span class="color-gold">4</span><span class="color-white">];</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">    a.</span><span class="color-emerald">push</span><span class="color-white">(</span><span class="color-gold">5</span><span class="color-white">);</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(3)" class="copy-fenced-code">Copy</button></pre><p>Only 2 lines. I want to see how vector initializaion and push operation are expressed in MIR. Before looking at the MIR, looking at the HIR would be helpful.</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-white">#[</span><span class="color-red">prelude_import</span><span class="color-white">]</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-violet">use </span><span class="color-white">std::prelude::rust_2021::*;</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">#[</span><span class="color-red">macro_use</span><span class="color-white">]</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"><span class="color-violet">extern crate</span><span class="color-white"> std;</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code">    <span class="color-violet">let mut</span><span class="color-white"> a = &lt;[_]&gt;::into_vec(</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-white">        #[</span><span class="color-red">rustc_box</span><span class="color-white">] ::alloc::boxed::Box::new([</span><span class="color-gold">1</span><span class="color-white">, </span><span class="color-gold">2</span><span class="color-white">, </span><span class="color-gold">3</span><span class="color-white">, </span><span class="color-gold">4</span><span class="color-white">])</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code"><span class="color-white">    );</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code"><span class="color-white">    a.</span><span class="color-emerald">push</span><span class="color-white">(</span><span class="color-gold">5</span><span class="color-white">);</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(4)" class="copy-fenced-code">Copy</button></pre><p>It turns <code class="inline-code-span">vec!</code> into <code class="inline-code-span">into_vec(Box::new())</code>. See the documents of <a href="https://doc.rust-lang.org/stable/std/boxed/index.html">Box</a> and <a href="https://github.com/rust-lang/rust/blob/master/library/alloc/src/slice.rs">into_vec</a><span id="tooltip-container-2" class="tooltip-container"><span id="footnote-ref-2" class="footnote-ref"><a href="#footnote-cite-0">[2]</a></span><span id="tooltip-message-2" class="tooltip-message">I didn&apos;t include the line number, cause it may change over time.</span></span> if you wanna know further.</p><p>Below is the MIR of the above code, generated in Debug mode.</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gray">// WARNING: This output format is intended for human consumers only</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gray">// and is subject to change without notice. Knock yourself out.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() -&gt; () {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_0</span><span class="color-white">: ();                      </span><span class="color-gray">// return place in scope 0 at src/main.rs:1:11: 1:11</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_1</span><span class="color-white">: std::vec::Vec&lt;</span><span class="color-violet">i32</span><span class="color-white">&gt;;      </span><span class="color-gray">// in scope 0 at src/main.rs:2:9: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_2</span><span class="color-white">: std::boxed::Box&lt;[</span><span class="color-violet">i32</span><span class="color-white">]&gt;;  </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_3</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                   </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_4</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                   </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_5</span><span class="color-white">: *</span><span class="color-violet">mut u8</span><span class="color-white">;                 </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_6</span><span class="color-white">: std::boxed::Box&lt;[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]&gt;; </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code">    <span class="color-violet">let </span><span class="color-gold">_7</span><span class="color-white">: ();                          </span><span class="color-gray">// in scope 0 at src/main.rs:3:5: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_8</span><span class="color-white">: &amp;</span><span class="color-violet">mut </span><span class="color-white">std::vec::Vec&lt;</span><span class="color-violet">i32</span><span class="color-white">&gt;; </span><span class="color-gray">// in scope 0 at src/main.rs:3:5: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_9</span><span class="color-white">: *</span><span class="color-violet">const </span><span class="color-white">[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">];         </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_10</span><span class="color-white">: *</span><span class="color-violet">const </span><span class="color-white">();              </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_11</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                  </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_12</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                  </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_13</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                  </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_14</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                  </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_15</span><span class="color-white">: </span><span class="color-violet">bool</span><span class="color-white">;                   </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code"><span class="color-white">    scope </span><span class="color-gold">1 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code"><span class="color-white">        debug a =&gt; </span><span class="color-gold">_1</span><span class="color-white">;                   </span><span class="color-gray">// in scope 1 at src/main.rs:2:9: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">22</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">23</span><span class="code-fence-code"><span class="color-white">    scope </span><span class="color-gold">2 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">24</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">25</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">26</span><span class="code-fence-code"><span class="color-white">    bb0: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">27</span><span class="code-fence-code">        <span class="color-gold">_3 </span><span class="color-white">= SizeOf([</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]);           </span><span class="color-gray">// scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">28</span><span class="code-fence-code">        <span class="color-gold">_4 </span><span class="color-white">= AlignOf([</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]);          </span><span class="color-gray">// scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">29</span><span class="code-fence-code">        <span class="color-gold">_5 </span><span class="color-white">= alloc::alloc::exchange_malloc(</span><span class="color-violet">move </span><span class="color-gold">_3</span><span class="color-white">, </span><span class="color-violet">move </span><span class="color-gold">_4</span><span class="color-white">) -&gt; bb1; </span><span class="color-gray">// scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">30</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">31</span><span class="code-fence-code">                                         <span class="color-gray">// + span: /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">32</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: unsafe fn(usize, usize) -&gt; *mut u8 {alloc::alloc::exchange_malloc}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">33</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">34</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">35</span><span class="code-fence-code"><span class="color-white">    bb1: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">36</span><span class="code-fence-code">        <span class="color-gold">_6 </span><span class="color-white">= ShallowInitBox(</span><span class="color-violet">move </span><span class="color-gold">_5</span><span class="color-white">, [</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]); </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">37</span><span class="code-fence-code">        <span class="color-gold">_9 </span><span class="color-white">= (((</span><span class="color-gold">_6</span><span class="color-white">.</span><span class="color-gold">0</span><span class="color-white">: std::ptr::Unique&lt;[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]&gt;).</span><span class="color-gold">0</span><span class="color-white">: std::ptr::NonNull&lt;[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]&gt;).</span><span class="color-gold">0</span><span class="color-white">: *</span><span class="color-violet">const </span><span class="color-white">[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]); </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">38</span><span class="code-fence-code">        <span class="color-gold">_10 </span><span class="color-white">= </span><span class="color-gold">_9 </span><span class="color-white">as *</span><span class="color-violet">const </span><span class="color-white">() (PtrToPtr); </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">39</span><span class="code-fence-code">        <span class="color-gold">_11 </span><span class="color-white">= </span><span class="color-gold">_10 </span><span class="color-white">as </span><span class="color-violet">usize </span><span class="color-white">(Transmute);  </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">40</span><span class="code-fence-code">        <span class="color-gold">_12 </span><span class="color-white">= AlignOf(</span><span class="color-violet">i32</span><span class="color-white">);              </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">41</span><span class="code-fence-code">        <span class="color-gold">_13 </span><span class="color-white">= Sub(</span><span class="color-gold">_12</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">usize</span><span class="color-white">);   </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">42</span><span class="code-fence-code">        <span class="color-gold">_14 </span><span class="color-white">= BitAnd(</span><span class="color-gold">_11</span><span class="color-white">, </span><span class="color-gold">_13</span><span class="color-white">);          </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">43</span><span class="code-fence-code">        <span class="color-gold">_15 </span><span class="color-white">= Eq(</span><span class="color-gold">_14</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">0_</span><span class="color-violet">usize</span><span class="color-white">);    </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">44</span><span class="code-fence-code">        <span class="color-emerald">assert</span><span class="color-white">(</span><span class="color-gold">_15</span><span class="color-white">, &quot;</span><span class="color-green">misaligned pointer dereference: address must be a multiple of {} but is {}</span><span class="color-white">&quot;, </span><span class="color-gold">_12</span><span class="color-white">, </span><span class="color-gold">_11</span><span class="color-white">) -&gt; [success: bb7, unwind terminate]; </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">45</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">46</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">47</span><span class="code-fence-code"><span class="color-white">    bb2: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">48</span><span class="code-fence-code">        <span class="color-gold">_8 </span><span class="color-white">= &amp;</span><span class="color-violet">mut </span><span class="color-gold">_1</span><span class="color-white">;                    </span><span class="color-gray">// scope 1 at src/main.rs:3:5: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">49</span><span class="code-fence-code">        <span class="color-gold">_7 </span><span class="color-white">= Vec::&lt;</span><span class="color-violet">i32</span><span class="color-white">&gt;::push(</span><span class="color-violet">move </span><span class="color-gold">_8</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">5_</span><span class="color-violet">i32</span><span class="color-white">) -&gt; [</span><span class="color-violet">return</span><span class="color-white">: bb3, unwind: bb5]; </span><span class="color-gray">// scope 1 at src/main.rs:3:5: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">50</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">51</span><span class="code-fence-code">                                         <span class="color-gray">// + span: src/main.rs:3:7: 3:11</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">52</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: for&lt;&apos;a&gt; fn(&amp;&apos;a mut Vec&lt;i32&gt;, i32) {Vec::&lt;i32&gt;::push}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">53</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">54</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">55</span><span class="code-fence-code"><span class="color-white">    bb3: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">56</span><span class="code-fence-code">        <span class="color-emerald">drop</span><span class="color-white">(</span><span class="color-gold">_1</span><span class="color-white">) -&gt; bb4;                 </span><span class="color-gray">// scope 0 at src/main.rs:4:1: 4:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">57</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">58</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">59</span><span class="code-fence-code"><span class="color-white">    bb4: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">60</span><span class="code-fence-code">        <span class="color-violet">return</span><span class="color-white">;                          </span><span class="color-gray">// scope 0 at src/main.rs:4:2: 4:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">61</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">62</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">63</span><span class="code-fence-code"><span class="color-white">    bb5 (cleanup): {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">64</span><span class="code-fence-code">        <span class="color-emerald">drop</span><span class="color-white">(</span><span class="color-gold">_1</span><span class="color-white">) -&gt; [</span><span class="color-violet">return</span><span class="color-white">: bb6, unwind terminate]; </span><span class="color-gray">// scope 0 at src/main.rs:4:1: 4:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">65</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">66</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">67</span><span class="code-fence-code"><span class="color-white">    bb6 (cleanup): {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">68</span><span class="code-fence-code"><span class="color-white">        resume;                          </span><span class="color-gray">// scope 0 at src/main.rs:1:1: 4:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">69</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">70</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">71</span><span class="code-fence-code"><span class="color-white">    bb7: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">72</span><span class="code-fence-code"><span class="color-white">        (*</span><span class="color-gold">_9</span><span class="color-white">) = [</span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">2_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">3_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">4_</span><span class="color-violet">i32</span><span class="color-white">]; </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">73</span><span class="code-fence-code">        <span class="color-gold">_2 </span><span class="color-white">= </span><span class="color-violet">move </span><span class="color-gold">_6 </span><span class="color-white">as std::boxed::Box&lt;[</span><span class="color-violet">i32</span><span class="color-white">]&gt; (Pointer(Unsize)); </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">74</span><span class="code-fence-code">        <span class="color-gold">_1 </span><span class="color-white">= slice::&lt;impl [</span><span class="color-violet">i32</span><span class="color-white">]&gt;::into_vec::&lt;std::alloc::Global&gt;(</span><span class="color-violet">move </span><span class="color-gold">_2</span><span class="color-white">) -&gt; bb2; </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:50:36: 55:10</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">75</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">76</span><span class="code-fence-code">                                         <span class="color-gray">// + span: /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:50:36: 50:51</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">77</span><span class="code-fence-code">                                         <span class="color-gray">// + user_ty: UserType(0)</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">78</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: fn(Box&lt;[i32]&gt;) -&gt; Vec&lt;i32&gt; {slice::&lt;impl [i32]&gt;::into_vec::&lt;std::alloc::Global&gt;}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">79</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">80</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(5)" class="copy-fenced-code">Copy</button></pre><p>A function in MIR consists of locals, scopes and basic blocks.</p><p>Locals are values stored on the stack, such as function arguments, local variables and temporary variables. They&apos;re underscored numbers. <code class="inline-code-span">_0</code> is the return value of the function. In our code, <code class="inline-code-span">_0</code> is <code class="inline-code-span">()</code> because the main function doesn&apos;t return anything. <code class="inline-code-span">a</code> in Rust is assigned to <code class="inline-code-span">_1</code> in MIR. <code class="inline-code-span">_2</code> through <code class="inline-code-span">_6</code> are temporary variables used by the <code class="inline-code-span">vec!</code> macro. <code class="inline-code-span">_7</code> is the return value of <code class="inline-code-span">.push</code> method. Since it returns nothing, <code class="inline-code-span">_7</code>&apos;s type is <code class="inline-code-span">()</code>.</p><p>After locals, there are scopes. They represent lexical scopes. They also contains debug information, which you can see in <code class="inline-code-span">scope 1</code> above. It says <code class="inline-code-span">a</code> is the name of <code class="inline-code-span">_1</code>. Scopes include all the debug information of user-defined variables.</p><p>Then you see basic blocks. They represent the control flow of the code. The flow starts at <code class="inline-code-span">bb0</code>, which stands for <em>basic block 0</em>. Each basic block contains one or more statements. The last statement is called terminator. The terminator tells which block to execute next. We call the next block <em>successor</em>. A block may have more than one successor.</p><p><code class="inline-code-span">bb0</code> allocates memory for <code class="inline-code-span">a</code> using <a href="https://github.com/rust-lang/rust/blob/master/library/alloc/src/alloc.rs">exchange_malloc</a><span id="tooltip-container-3" class="tooltip-container"><span id="footnote-ref-3" class="footnote-ref"><a href="#footnote-cite-0">[3]</a></span><span id="tooltip-message-3" class="tooltip-message">I didn&apos;t include the line number, cause it may change over time.</span></span> and stores the pointer at <code class="inline-code-span">_5</code>. <code class="inline-code-span">-&gt; bb1</code> after the terminator means it should go to <code class="inline-code-span">bb1</code> after executing <code class="inline-code-span">bb0</code>.</p><p><code class="inline-code-span">bb1</code> creates a pointer for <code class="inline-code-span">[i32; 4]</code>, stores it at <code class="inline-code-span">_9</code>, and checks whether the pointer is well aligned. If so, it goes to <code class="inline-code-span">bb7</code>. Otherwise, it terminates. The two successors are in squared brackets after the terminator.</p><p><code class="inline-code-span">bb7</code> initializes the vector, and <code class="inline-code-span">bb2</code> pushes an element. After everything is done, the runtime calls the destructor of the vector by dropping it, then terminates.</p><p><br/></p><p>What if we run the same code in release mode?</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gray">// WARNING: This output format is intended for human consumers only</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gray">// and is subject to change without notice. Knock yourself out.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() -&gt; () {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_0</span><span class="color-white">: ();                      </span><span class="color-gray">// return place in scope 0 at src/main.rs:1:11: 1:11</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_1</span><span class="color-white">: std::vec::Vec&lt;</span><span class="color-violet">i32</span><span class="color-white">&gt;;      </span><span class="color-gray">// in scope 0 at src/main.rs:2:9: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_2</span><span class="color-white">: std::boxed::Box&lt;[</span><span class="color-violet">i32</span><span class="color-white">]&gt;;  </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_3</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                   </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_4</span><span class="color-white">: </span><span class="color-violet">usize</span><span class="color-white">;                   </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_5</span><span class="color-white">: *</span><span class="color-violet">mut u8</span><span class="color-white">;                 </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_6</span><span class="color-white">: std::boxed::Box&lt;[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]&gt;; </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code">    <span class="color-violet">let </span><span class="color-gold">_7</span><span class="color-white">: ();                          </span><span class="color-gray">// in scope 0 at src/main.rs:3:5: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_8</span><span class="color-white">: &amp;</span><span class="color-violet">mut </span><span class="color-white">std::vec::Vec&lt;</span><span class="color-violet">i32</span><span class="color-white">&gt;; </span><span class="color-gray">// in scope 0 at src/main.rs:3:5: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_9</span><span class="color-white">: *</span><span class="color-violet">const </span><span class="color-white">[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">];         </span><span class="color-gray">// in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code"><span class="color-white">    scope </span><span class="color-gold">1 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code"><span class="color-white">        debug a =&gt; </span><span class="color-gold">_1</span><span class="color-white">;                   </span><span class="color-gray">// in scope 1 at src/main.rs:2:9: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code"><span class="color-white">    scope </span><span class="color-gold">2 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code"><span class="color-white">    scope </span><span class="color-gold">3 </span><span class="color-white">(inlined slice::&lt;impl [</span><span class="color-violet">i32</span><span class="color-white">]&gt;::into_vec::&lt;std::alloc::Global&gt;) { </span><span class="color-gray">// at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:50:36: 55:10</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code"><span class="color-white">        debug </span><span class="color-red">self </span><span class="color-white">=&gt; </span><span class="color-gold">_2</span><span class="color-white">;                </span><span class="color-gray">// in scope 3 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/slice.rs:461:35: 461:39</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">22</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">23</span><span class="code-fence-code"><span class="color-white">    bb0: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">24</span><span class="code-fence-code"><span class="color-white">        StorageLive(</span><span class="color-gold">_1</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at src/main.rs:2:9: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">25</span><span class="code-fence-code"><span class="color-white">        StorageLive(</span><span class="color-gold">_2</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">26</span><span class="code-fence-code">        <span class="color-gold">_3 </span><span class="color-white">= </span><span class="color-violet">const </span><span class="color-gold">16_</span><span class="color-violet">usize</span><span class="color-white">;             </span><span class="color-gray">// scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">27</span><span class="code-fence-code">        <span class="color-gold">_4 </span><span class="color-white">= </span><span class="color-violet">const </span><span class="color-gold">4_</span><span class="color-violet">usize</span><span class="color-white">;              </span><span class="color-gray">// scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">28</span><span class="code-fence-code">        <span class="color-gold">_5 </span><span class="color-white">= alloc::alloc::exchange_malloc(</span><span class="color-violet">move </span><span class="color-gold">_3</span><span class="color-white">, </span><span class="color-violet">move </span><span class="color-gold">_4</span><span class="color-white">) -&gt; bb1; </span><span class="color-gray">// scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">29</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">30</span><span class="code-fence-code">                                         <span class="color-gray">// + span: /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">31</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: unsafe fn(usize, usize) -&gt; *mut u8 {alloc::alloc::exchange_malloc}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">32</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">33</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">34</span><span class="code-fence-code"><span class="color-white">    bb1: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">35</span><span class="code-fence-code">        <span class="color-gold">_6 </span><span class="color-white">= ShallowInitBox(</span><span class="color-violet">move </span><span class="color-gold">_5</span><span class="color-white">, [</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]); </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">36</span><span class="code-fence-code">        <span class="color-gold">_9 </span><span class="color-white">= (((</span><span class="color-gold">_6</span><span class="color-white">.</span><span class="color-gold">0</span><span class="color-white">: std::ptr::Unique&lt;[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]&gt;).</span><span class="color-gold">0</span><span class="color-white">: std::ptr::NonNull&lt;[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]&gt;).</span><span class="color-gold">0</span><span class="color-white">: *</span><span class="color-violet">const </span><span class="color-white">[</span><span class="color-violet">i32</span><span class="color-white">; </span><span class="color-gold">4</span><span class="color-white">]); </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">37</span><span class="code-fence-code"><span class="color-white">        (*</span><span class="color-gold">_9</span><span class="color-white">) = [</span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">2_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">3_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">4_</span><span class="color-violet">i32</span><span class="color-white">]; </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">38</span><span class="code-fence-code">        <span class="color-gold">_2 </span><span class="color-white">= </span><span class="color-violet">move </span><span class="color-gold">_6 </span><span class="color-white">as std::boxed::Box&lt;[</span><span class="color-violet">i32</span><span class="color-white">]&gt; (Pointer(Unsize)); </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">39</span><span class="code-fence-code">        <span class="color-gold">_1 </span><span class="color-white">= slice::hack::into_vec::&lt;</span><span class="color-violet">i32</span><span class="color-white">, std::alloc::Global&gt;(</span><span class="color-violet">move </span><span class="color-gold">_2</span><span class="color-white">) -&gt; bb6; </span><span class="color-gray">// scope 3 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/slice.rs:463:9: 463:29</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">40</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">41</span><span class="code-fence-code">                                         <span class="color-gray">// + span: /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/slice.rs:463:9: 463:23</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">42</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: fn(Box&lt;[i32]&gt;) -&gt; Vec&lt;i32&gt; {slice::hack::into_vec::&lt;i32, std::alloc::Global&gt;}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">43</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">44</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">45</span><span class="code-fence-code"><span class="color-white">    bb2: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">46</span><span class="code-fence-code"><span class="color-white">        StorageDead(</span><span class="color-gold">_8</span><span class="color-white">);                 </span><span class="color-gray">// scope 1 at src/main.rs:3:13: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">47</span><span class="code-fence-code">        <span class="color-emerald">drop</span><span class="color-white">(</span><span class="color-gold">_1</span><span class="color-white">) -&gt; bb3;                 </span><span class="color-gray">// scope 0 at src/main.rs:4:1: 4:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">48</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">49</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">50</span><span class="code-fence-code"><span class="color-white">    bb3: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">51</span><span class="code-fence-code"><span class="color-white">        StorageDead(</span><span class="color-gold">_1</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at src/main.rs:4:1: 4:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">52</span><span class="code-fence-code">        <span class="color-violet">return</span><span class="color-white">;                          </span><span class="color-gray">// scope 0 at src/main.rs:4:2: 4:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">53</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">54</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">55</span><span class="code-fence-code"><span class="color-white">    bb4 (cleanup): {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">56</span><span class="code-fence-code">        <span class="color-emerald">drop</span><span class="color-white">(</span><span class="color-gold">_1</span><span class="color-white">) -&gt; [</span><span class="color-violet">return</span><span class="color-white">: bb5, unwind terminate]; </span><span class="color-gray">// scope 0 at src/main.rs:4:1: 4:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">57</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">58</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">59</span><span class="code-fence-code"><span class="color-white">    bb5 (cleanup): {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">60</span><span class="code-fence-code"><span class="color-white">        resume;                          </span><span class="color-gray">// scope 0 at src/main.rs:1:1: 4:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">61</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">62</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">63</span><span class="code-fence-code"><span class="color-white">    bb6: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">64</span><span class="code-fence-code"><span class="color-white">        StorageDead(</span><span class="color-gold">_2</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:55:9: 55:10</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">65</span><span class="code-fence-code"><span class="color-white">        StorageLive(</span><span class="color-gold">_8</span><span class="color-white">);                 </span><span class="color-gray">// scope 1 at src/main.rs:3:5: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">66</span><span class="code-fence-code">        <span class="color-gold">_8 </span><span class="color-white">= &amp;</span><span class="color-violet">mut </span><span class="color-gold">_1</span><span class="color-white">;                    </span><span class="color-gray">// scope 1 at src/main.rs:3:5: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">67</span><span class="code-fence-code">        <span class="color-gold">_7 </span><span class="color-white">= Vec::&lt;</span><span class="color-violet">i32</span><span class="color-white">&gt;::push(</span><span class="color-violet">move </span><span class="color-gold">_8</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">5_</span><span class="color-violet">i32</span><span class="color-white">) -&gt; [</span><span class="color-violet">return</span><span class="color-white">: bb2, unwind: bb4]; </span><span class="color-gray">// scope 1 at src/main.rs:3:5: 3:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">68</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">69</span><span class="code-fence-code">                                         <span class="color-gray">// + span: src/main.rs:3:7: 3:11</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">70</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: for&lt;&apos;a&gt; fn(&amp;&apos;a mut Vec&lt;i32&gt;, i32) {Vec::&lt;i32&gt;::push}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">71</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">72</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(6)" class="copy-fenced-code">Copy</button></pre><p>It&apos;s way shorter! <code class="inline-code-span">bb0</code> doesn&apos;t calculate the size and the alignment of <code class="inline-code-span">[i32; 4]</code> anymore. I guess the compiler calculated it and hard-coded it. There are <code class="inline-code-span">StorageDead</code> and <code class="inline-code-span">StorageLive</code> functions which we didn&apos;t see in debug mode. <code class="inline-code-span">StorageLive(_1)</code> tells LLVM that <code class="inline-code-span">_1</code> may be used later. <code class="inline-code-span">StorageDead(_1)</code> means it won&apos;t be used anymore. It helps LLVM allocate stack space.</p><p>In release mode, it doens&apos;t check the alignment of the pointer anymore. It just initializes the vector in <code class="inline-code-span">bb1</code>.</p><p>Reference: <a href="https://rustc-dev-guide.rust-lang.org/mir/index.html">RustC Dev Guide</a></p><h3 id="example-2-adder">Example 2: Adder</h3><p>Let&apos;s do the same thing with another simple code.</p><pre class="fenced-code-block line-num-width-0"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code">    <span class="color-emerald">add</span><span class="color-white">(</span><span class="color-gold">3</span><span class="color-white">, </span><span class="color-gold">4</span><span class="color-white">);</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">foo</span><span class="color-white">(</span><span class="color-red">a</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-red">b</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">) -&gt; </span><span class="color-violet">i32 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code">    <span class="color-violet">if</span><span class="color-white"> a &gt; b { a + </span><span class="color-gold">1 </span><span class="color-white">} </span><span class="color-violet">else </span><span class="color-white">{ b + </span><span class="color-gold">1</span><span class="color-white">}</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(7)" class="copy-fenced-code">Copy</button></pre><p>We don&apos;t need HIR this time: it&apos;s (almost) identical to the original code. Let&apos;s go directly to the MIR.</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gray">// WARNING: This output format is intended for human consumers only</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gray">// and is subject to change without notice. Knock yourself out.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() -&gt; () {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_0</span><span class="color-white">: ();                      </span><span class="color-gray">// return place in scope 0 at src/main.rs:1:11: 1:11</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code">    <span class="color-violet">let </span><span class="color-gold">_1</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">;                         </span><span class="color-gray">// in scope 0 at src/main.rs:2:5: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">    bb0: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code">        <span class="color-gold">_1 </span><span class="color-white">= </span><span class="color-emerald">foo</span><span class="color-white">(</span><span class="color-violet">const </span><span class="color-gold">3_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">4_</span><span class="color-violet">i32</span><span class="color-white">) -&gt; bb1; </span><span class="color-gray">// scope 0 at src/main.rs:2:5: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code">                                         <span class="color-gray">// + span: src/main.rs:2:5: 2:8</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: fn(i32, i32) -&gt; i32 {foo}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code"><span class="color-white">    bb1: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code">        <span class="color-violet">return</span><span class="color-white">;                          </span><span class="color-gray">// scope 0 at src/main.rs:3:2: 3:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">foo</span><span class="color-white">(</span><span class="color-red">_1</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-red">_2</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">) -&gt; </span><span class="color-violet">i32 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code"><span class="color-white">    debug a =&gt; </span><span class="color-gold">_1</span><span class="color-white">;                       </span><span class="color-gray">// in scope 0 at src/main.rs:5:8: 5:9</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code"><span class="color-white">    debug b =&gt; </span><span class="color-gold">_2</span><span class="color-white">;                       </span><span class="color-gray">// in scope 0 at src/main.rs:5:16: 5:17</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">22</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_0</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">;                     </span><span class="color-gray">// return place in scope 0 at src/main.rs:5:27: 5:30</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">23</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_3</span><span class="color-white">: </span><span class="color-violet">bool</span><span class="color-white">;                    </span><span class="color-gray">// in scope 0 at src/main.rs:6:8: 6:13</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">24</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_4</span><span class="color-white">: (</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">bool</span><span class="color-white">);             </span><span class="color-gray">// in scope 0 at src/main.rs:6:16: 6:21</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">25</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_5</span><span class="color-white">: (</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">bool</span><span class="color-white">);             </span><span class="color-gray">// in scope 0 at src/main.rs:6:31: 6:36</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">26</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">27</span><span class="code-fence-code"><span class="color-white">    bb0: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">28</span><span class="code-fence-code">        <span class="color-gold">_3 </span><span class="color-white">= Gt(</span><span class="color-gold">_1</span><span class="color-white">, </span><span class="color-gold">_2</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at src/main.rs:6:8: 6:13</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">29</span><span class="code-fence-code"><span class="color-white">        switchInt(</span><span class="color-violet">move </span><span class="color-gold">_3</span><span class="color-white">) -&gt; [</span><span class="color-gold">0</span><span class="color-white">: bb3, otherwise: bb1]; </span><span class="color-gray">// scope 0 at src/main.rs:6:8: 6:13</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">30</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">31</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">32</span><span class="code-fence-code"><span class="color-white">    bb1: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">33</span><span class="code-fence-code">        <span class="color-gold">_4 </span><span class="color-white">= CheckedAdd(</span><span class="color-gold">_1</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">i32</span><span class="color-white">); </span><span class="color-gray">// scope 0 at src/main.rs:6:16: 6:21</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">34</span><span class="code-fence-code">        <span class="color-emerald">assert</span><span class="color-white">(!</span><span class="color-violet">move </span><span class="color-white">(</span><span class="color-gold">_4</span><span class="color-white">.</span><span class="color-gold">1</span><span class="color-white">: </span><span class="color-violet">bool</span><span class="color-white">), &quot;</span><span class="color-green">attempt to compute `{} + {}`, which would overflow</span><span class="color-white">&quot;, </span><span class="color-gold">_1</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">i32</span><span class="color-white">) -&gt; bb2; </span><span class="color-gray">// scope 0 at src/main.rs:6:16: 6:21</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">35</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">36</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">37</span><span class="code-fence-code"><span class="color-white">    bb2: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">38</span><span class="code-fence-code">        <span class="color-gold">_0 </span><span class="color-white">= </span><span class="color-violet">move </span><span class="color-white">(</span><span class="color-gold">_4</span><span class="color-white">.</span><span class="color-gold">0</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">);           </span><span class="color-gray">// scope 0 at src/main.rs:6:16: 6:21</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">39</span><span class="code-fence-code"><span class="color-white">        goto -&gt; bb5;                     </span><span class="color-gray">// scope 0 at src/main.rs:6:5: 6:37</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">40</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">41</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">42</span><span class="code-fence-code"><span class="color-white">    bb3: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">43</span><span class="code-fence-code">        <span class="color-gold">_5 </span><span class="color-white">= CheckedAdd(</span><span class="color-gold">_2</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">i32</span><span class="color-white">); </span><span class="color-gray">// scope 0 at src/main.rs:6:31: 6:36</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">44</span><span class="code-fence-code">        <span class="color-emerald">assert</span><span class="color-white">(!</span><span class="color-violet">move </span><span class="color-white">(</span><span class="color-gold">_5</span><span class="color-white">.</span><span class="color-gold">1</span><span class="color-white">: </span><span class="color-violet">bool</span><span class="color-white">), &quot;</span><span class="color-green">attempt to compute `{} + {}`, which would overflow</span><span class="color-white">&quot;, </span><span class="color-gold">_2</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">i32</span><span class="color-white">) -&gt; bb4; </span><span class="color-gray">// scope 0 at src/main.rs:6:31: 6:36</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">45</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">46</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">47</span><span class="code-fence-code"><span class="color-white">    bb4: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">48</span><span class="code-fence-code">        <span class="color-gold">_0 </span><span class="color-white">= </span><span class="color-violet">move </span><span class="color-white">(</span><span class="color-gold">_5</span><span class="color-white">.</span><span class="color-gold">0</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">);           </span><span class="color-gray">// scope 0 at src/main.rs:6:31: 6:36</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">49</span><span class="code-fence-code"><span class="color-white">        goto -&gt; bb5;                     </span><span class="color-gray">// scope 0 at src/main.rs:6:5: 6:37</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">50</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">51</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">52</span><span class="code-fence-code"><span class="color-white">    bb5: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">53</span><span class="code-fence-code">        <span class="color-violet">return</span><span class="color-white">;                          </span><span class="color-gray">// scope 0 at src/main.rs:7:2: 7:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">54</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">55</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(8)" class="copy-fenced-code">Copy</button></pre><p>Above is its MIR in debug mode. Let&apos;s look at the <code class="inline-code-span">foo</code> function. Two parameters: <code class="inline-code-span">a</code> and <code class="inline-code-span">b</code> are assigned to <code class="inline-code-span">_1</code> and <code class="inline-code-span">_2</code>. You can see their debug info at the top of the function. Its return value is assigned to <code class="inline-code-span">_0</code>, as usual. <code class="inline-code-span">_3</code> is a temporary variable which stores the result of <code class="inline-code-span">a &gt; b</code>.</p><p>In <code class="inline-code-span">bb0</code>, it computes the result of <code class="inline-code-span">a &gt; b</code> and stores it at <code class="inline-code-span">_3</code>. If the result is 0, it goes to <code class="inline-code-span">bb3</code>. Otherwise, it goes to <code class="inline-code-span">bb1</code>. In <code class="inline-code-span">bb1</code> and <code class="inline-code-span">bb3</code>, it calls <code class="inline-code-span">CheckedAdd</code>, not just <code class="inline-code-span">Add</code>. The <code class="inline-code-span">CheckedAdd</code> function returns the result and whether it overflowed. That&apos;s why the type of <code class="inline-code-span">_4</code> and <code class="inline-code-span">_5</code> are <code class="inline-code-span">(i32, bool)</code>.</p><p>After that, it goes to <code class="inline-code-span">bb2</code> or <code class="inline-code-span">bb4</code> where it moves the result to <code class="inline-code-span">_0</code> and returns.</p><p>In release mode, it&apos;s way simpler. See below.</p><pre class="fenced-code-block line-num-width-1"><code><span class="code-fence-row"><span class="code-fence-index">1</span><span class="code-fence-code"><span class="color-gray">// WARNING: This output format is intended for human consumers only</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">2</span><span class="code-fence-code"><span class="color-gray">// and is subject to change without notice. Knock yourself out.</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">3</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">main</span><span class="color-white">() -&gt; () {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">4</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_0</span><span class="color-white">: ();                      </span><span class="color-gray">// return place in scope 0 at src/main.rs:1:11: 1:11</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">5</span><span class="code-fence-code">    <span class="color-violet">let </span><span class="color-gold">_1</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">;                         </span><span class="color-gray">// in scope 0 at src/main.rs:2:5: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">6</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">7</span><span class="code-fence-code"><span class="color-white">    bb0: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">8</span><span class="code-fence-code"><span class="color-white">        StorageLive(</span><span class="color-gold">_1</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at src/main.rs:2:5: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">9</span><span class="code-fence-code">        <span class="color-gold">_1 </span><span class="color-white">= </span><span class="color-emerald">foo</span><span class="color-white">(</span><span class="color-violet">const </span><span class="color-gold">3_</span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">4_</span><span class="color-violet">i32</span><span class="color-white">) -&gt; bb1; </span><span class="color-gray">// scope 0 at src/main.rs:2:5: 2:14</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">10</span><span class="code-fence-code">                                         <span class="color-gray">// mir::Constant</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">11</span><span class="code-fence-code">                                         <span class="color-gray">// + span: src/main.rs:2:5: 2:8</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">12</span><span class="code-fence-code">                                         <span class="color-gray">// + literal: Const { ty: fn(i32, i32) -&gt; i32 {foo}, val: Value(&lt;ZST&gt;) }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">13</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">14</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">15</span><span class="code-fence-code"><span class="color-white">    bb1: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">16</span><span class="code-fence-code"><span class="color-white">        StorageDead(</span><span class="color-gold">_1</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at src/main.rs:2:14: 2:15</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">17</span><span class="code-fence-code">        <span class="color-violet">return</span><span class="color-white">;                          </span><span class="color-gray">// scope 0 at src/main.rs:3:2: 3:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">18</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">19</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">20</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">21</span><span class="code-fence-code"><span class="color-violet">fn </span><span class="color-aqua">foo</span><span class="color-white">(</span><span class="color-red">_1</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">, </span><span class="color-red">_2</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">) -&gt; </span><span class="color-violet">i32 </span><span class="color-white">{</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">22</span><span class="code-fence-code"><span class="color-white">    debug a =&gt; </span><span class="color-gold">_1</span><span class="color-white">;                       </span><span class="color-gray">// in scope 0 at src/main.rs:5:8: 5:9</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">23</span><span class="code-fence-code"><span class="color-white">    debug b =&gt; </span><span class="color-gold">_2</span><span class="color-white">;                       </span><span class="color-gray">// in scope 0 at src/main.rs:5:16: 5:17</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">24</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_0</span><span class="color-white">: </span><span class="color-violet">i32</span><span class="color-white">;                     </span><span class="color-gray">// return place in scope 0 at src/main.rs:5:27: 5:30</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">25</span><span class="code-fence-code">    <span class="color-violet">let mut </span><span class="color-gold">_3</span><span class="color-white">: </span><span class="color-violet">bool</span><span class="color-white">;                    </span><span class="color-gray">// in scope 0 at src/main.rs:6:8: 6:13</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">26</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">27</span><span class="code-fence-code"><span class="color-white">    bb0: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">28</span><span class="code-fence-code"><span class="color-white">        StorageLive(</span><span class="color-gold">_3</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at src/main.rs:6:8: 6:13</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">29</span><span class="code-fence-code">        <span class="color-gold">_3 </span><span class="color-white">= Gt(</span><span class="color-gold">_1</span><span class="color-white">, </span><span class="color-gold">_2</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at src/main.rs:6:8: 6:13</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">30</span><span class="code-fence-code"><span class="color-white">        switchInt(</span><span class="color-violet">move </span><span class="color-gold">_3</span><span class="color-white">) -&gt; [</span><span class="color-gold">0</span><span class="color-white">: bb2, otherwise: bb1]; </span><span class="color-gray">// scope 0 at src/main.rs:6:8: 6:13</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">31</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">32</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">33</span><span class="code-fence-code"><span class="color-white">    bb1: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">34</span><span class="code-fence-code">        <span class="color-gold">_0 </span><span class="color-white">= Add(</span><span class="color-gold">_1</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">i32</span><span class="color-white">);       </span><span class="color-gray">// scope 0 at src/main.rs:6:16: 6:21</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">35</span><span class="code-fence-code"><span class="color-white">        goto -&gt; bb3;                     </span><span class="color-gray">// scope 0 at src/main.rs:6:5: 6:37</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">36</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">37</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">38</span><span class="code-fence-code"><span class="color-white">    bb2: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">39</span><span class="code-fence-code">        <span class="color-gold">_0 </span><span class="color-white">= Add(</span><span class="color-gold">_2</span><span class="color-white">, </span><span class="color-violet">const </span><span class="color-gold">1_</span><span class="color-violet">i32</span><span class="color-white">);       </span><span class="color-gray">// scope 0 at src/main.rs:6:31: 6:36</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">40</span><span class="code-fence-code"><span class="color-white">        goto -&gt; bb3;                     </span><span class="color-gray">// scope 0 at src/main.rs:6:5: 6:37</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">41</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">42</span><span class="code-fence-code"></span></span>
<span class="code-fence-row"><span class="code-fence-index">43</span><span class="code-fence-code"><span class="color-white">    bb3: {</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">44</span><span class="code-fence-code"><span class="color-white">        StorageDead(</span><span class="color-gold">_3</span><span class="color-white">);                 </span><span class="color-gray">// scope 0 at src/main.rs:6:36: 6:37</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">45</span><span class="code-fence-code">        <span class="color-violet">return</span><span class="color-white">;                          </span><span class="color-gray">// scope 0 at src/main.rs:7:2: 7:2</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">46</span><span class="code-fence-code"><span class="color-white">    }</span></span></span>
<span class="code-fence-row"><span class="code-fence-index">47</span><span class="code-fence-code"><span class="color-white">}</span></span></span>
</code><button onclick="copy_code_to_clipboard(9)" class="copy-fenced-code">Copy</button></pre><p>I have no idea why <code class="inline-code-span">StorageLive</code> and <code class="inline-code-span">StorageDead</code> only appear in release mode. It&apos;s almost identical to the previous MIR, except that it doesn&apos;t check the overflow.</p><hr class="footnote-hr"/><div class="mdxt-footnote-cites"><p><div class="footnote-cite"><a id="footnote-cite-0"></a><a href="#footnote-ref-0"> [0]</a> <a href="#footnote-ref-1"> [1]</a> <a href="#footnote-ref-2"> [2]</a> <a href="#footnote-ref-3"> [3]</a> I didn&apos;t include the line number, cause it may change over time.</div></p></div><script>/*<![CDATA[*/
const fenced_code_block_contents = ["", "fn main() {\n    for i in 1..200 {\n        if i % 15 == 0 { println!(\"fizzbuzz\"); }\n        else if i % 3 == 0 { println!(\"fizz\"); }\n        else if i % 5 == 0 { println!(\"buzz\"); }\n        else { println!(\"{i}\"); }\n    }\n}", "#[prelude_import]\nuse std::prelude::rust_2021::*;\n#[macro_use]\nextern crate std;\nfn main() {\n    {\n        let _t = match #[lang = \"into_iter\"](#[lang = \"Range\"]{ start: 1, end: 200, }) {\n            mut iter => loop {\n                match #[lang = \"next\"](&mut iter) {\n                    #[lang = \"None\"] {} => break,\n                    #[lang = \"Some\"] {  0: i } => {\n                        if i % 15 == 0 { {\n                            ::std::io::_print(<#[lang = \"format_arguments\"]>::new_const(&[\"fizzbuzz\\n\"]));\n                        }; }\n\n                        else if i % 3 == 0 { {\n                            ::std::io::_print(<#[lang = \"format_arguments\"]>::new_const(&[\"fizz\\n\"]));\n                        }; }\n\n                        else if i % 5 == 0 { {\n                            ::std::io::_print(<#[lang = \"format_arguments\"]>::new_const(&[\"buzz\\n\"]));\n                        }; }\n\n                        else { {\n                            ::std::io::_print(\n                                <#[lang = \"format_arguments\"]>::new_v1(\n                                    &[\"\", \"\\n\"],\n                                    &[<#[lang = \"format_argument\"]>::new_display(&i)])\n                                );\n                        }; }\n                    }\n                }\n            },\n        };\n\n        _t\n    }\n}", "fn main() {\n    let mut a = vec![1, 2, 3, 4];\n    a.push(5);\n}", "#[prelude_import]\nuse std::prelude::rust_2021::*;\n#[macro_use]\nextern crate std;\n\nfn main() {\n    let mut a = <[_]>::into_vec(\n        #[rustc_box] ::alloc::boxed::Box::new([1, 2, 3, 4])\n    );\n\n    a.push(5);\n}", "// WARNING: This output format is intended for human consumers only\n// and is subject to change without notice. Knock yourself out.\nfn main() -> () {\n    let mut _0: ();                      // return place in scope 0 at src/main.rs:1:11: 1:11\n    let mut _1: std::vec::Vec<i32>;      // in scope 0 at src/main.rs:2:9: 2:14\n    let mut _2: std::boxed::Box<[i32]>;  // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _3: usize;                   // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _4: usize;                   // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _5: *mut u8;                 // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _6: std::boxed::Box<[i32; 4]>; // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let _7: ();                          // in scope 0 at src/main.rs:3:5: 3:14\n    let mut _8: &mut std::vec::Vec<i32>; // in scope 0 at src/main.rs:3:5: 3:14\n    let mut _9: *const [i32; 4];         // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _10: *const ();              // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n    let mut _11: usize;                  // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n    let mut _12: usize;                  // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n    let mut _13: usize;                  // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n    let mut _14: usize;                  // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n    let mut _15: bool;                   // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n    scope 1 {\n        debug a => _1;                   // in scope 1 at src/main.rs:2:9: 2:14\n    }\n    scope 2 {\n    }\n\n    bb0: {\n        _3 = SizeOf([i32; 4]);           // scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n        _4 = AlignOf([i32; 4]);          // scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n        _5 = alloc::alloc::exchange_malloc(move _3, move _4) -> bb1; // scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n                                         // mir::Constant\n                                         // + span: /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n                                         // + literal: Const { ty: unsafe fn(usize, usize) -> *mut u8 {alloc::alloc::exchange_malloc}, val: Value(<ZST>) }\n    }\n\n    bb1: {\n        _6 = ShallowInitBox(move _5, [i32; 4]); // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n        _9 = (((_6.0: std::ptr::Unique<[i32; 4]>).0: std::ptr::NonNull<[i32; 4]>).0: *const [i32; 4]); // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        _10 = _9 as *const () (PtrToPtr); // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        _11 = _10 as usize (Transmute);  // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        _12 = AlignOf(i32);              // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        _13 = Sub(_12, const 1_usize);   // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        _14 = BitAnd(_11, _13);          // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        _15 = Eq(_14, const 0_usize);    // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        assert(_15, \"misaligned pointer dereference: address must be a multiple of {} but is {}\", _12, _11) -> [success: bb7, unwind terminate]; // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n    }\n\n    bb2: {\n        _8 = &mut _1;                    // scope 1 at src/main.rs:3:5: 3:14\n        _7 = Vec::<i32>::push(move _8, const 5_i32) -> [return: bb3, unwind: bb5]; // scope 1 at src/main.rs:3:5: 3:14\n                                         // mir::Constant\n                                         // + span: src/main.rs:3:7: 3:11\n                                         // + literal: Const { ty: for<'a> fn(&'a mut Vec<i32>, i32) {Vec::<i32>::push}, val: Value(<ZST>) }\n    }\n\n    bb3: {\n        drop(_1) -> bb4;                 // scope 0 at src/main.rs:4:1: 4:2\n    }\n\n    bb4: {\n        return;                          // scope 0 at src/main.rs:4:2: 4:2\n    }\n\n    bb5 (cleanup): {\n        drop(_1) -> [return: bb6, unwind terminate]; // scope 0 at src/main.rs:4:1: 4:2\n    }\n\n    bb6 (cleanup): {\n        resume;                          // scope 0 at src/main.rs:1:1: 4:2\n    }\n\n    bb7: {\n        (*_9) = [const 1_i32, const 2_i32, const 3_i32, const 4_i32]; // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        _2 = move _6 as std::boxed::Box<[i32]> (Pointer(Unsize)); // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n        _1 = slice::<impl [i32]>::into_vec::<std::alloc::Global>(move _2) -> bb2; // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:50:36: 55:10\n                                         // mir::Constant\n                                         // + span: /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:50:36: 50:51\n                                         // + user_ty: UserType(0)\n                                         // + literal: Const { ty: fn(Box<[i32]>) -> Vec<i32> {slice::<impl [i32]>::into_vec::<std::alloc::Global>}, val: Value(<ZST>) }\n    }\n}", "// WARNING: This output format is intended for human consumers only\n// and is subject to change without notice. Knock yourself out.\nfn main() -> () {\n    let mut _0: ();                      // return place in scope 0 at src/main.rs:1:11: 1:11\n    let mut _1: std::vec::Vec<i32>;      // in scope 0 at src/main.rs:2:9: 2:14\n    let mut _2: std::boxed::Box<[i32]>;  // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _3: usize;                   // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _4: usize;                   // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _5: *mut u8;                 // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let mut _6: std::boxed::Box<[i32; 4]>; // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    let _7: ();                          // in scope 0 at src/main.rs:3:5: 3:14\n    let mut _8: &mut std::vec::Vec<i32>; // in scope 0 at src/main.rs:3:5: 3:14\n    let mut _9: *const [i32; 4];         // in scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n    scope 1 {\n        debug a => _1;                   // in scope 1 at src/main.rs:2:9: 2:14\n    }\n    scope 2 {\n    }\n    scope 3 (inlined slice::<impl [i32]>::into_vec::<std::alloc::Global>) { // at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:50:36: 55:10\n        debug self => _2;                // in scope 3 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/slice.rs:461:35: 461:39\n    }\n\n    bb0: {\n        StorageLive(_1);                 // scope 0 at src/main.rs:2:9: 2:14\n        StorageLive(_2);                 // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n        _3 = const 16_usize;             // scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n        _4 = const 4_usize;              // scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n        _5 = alloc::alloc::exchange_malloc(move _3, move _4) -> bb1; // scope 2 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n                                         // mir::Constant\n                                         // + span: /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n                                         // + literal: Const { ty: unsafe fn(usize, usize) -> *mut u8 {alloc::alloc::exchange_malloc}, val: Value(<ZST>) }\n    }\n\n    bb1: {\n        _6 = ShallowInitBox(move _5, [i32; 4]); // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n        _9 = (((_6.0: std::ptr::Unique<[i32; 4]>).0: std::ptr::NonNull<[i32; 4]>).0: *const [i32; 4]); // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        (*_9) = [const 1_i32, const 2_i32, const 3_i32, const 4_i32]; // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:37: 54:46\n        _2 = move _6 as std::boxed::Box<[i32]> (Pointer(Unsize)); // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:54:13: 54:47\n        _1 = slice::hack::into_vec::<i32, std::alloc::Global>(move _2) -> bb6; // scope 3 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/slice.rs:463:9: 463:29\n                                         // mir::Constant\n                                         // + span: /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/slice.rs:463:9: 463:23\n                                         // + literal: Const { ty: fn(Box<[i32]>) -> Vec<i32> {slice::hack::into_vec::<i32, std::alloc::Global>}, val: Value(<ZST>) }\n    }\n\n    bb2: {\n        StorageDead(_8);                 // scope 1 at src/main.rs:3:13: 3:14\n        drop(_1) -> bb3;                 // scope 0 at src/main.rs:4:1: 4:2\n    }\n\n    bb3: {\n        StorageDead(_1);                 // scope 0 at src/main.rs:4:1: 4:2\n        return;                          // scope 0 at src/main.rs:4:2: 4:2\n    }\n\n    bb4 (cleanup): {\n        drop(_1) -> [return: bb5, unwind terminate]; // scope 0 at src/main.rs:4:1: 4:2\n    }\n\n    bb5 (cleanup): {\n        resume;                          // scope 0 at src/main.rs:1:1: 4:2\n    }\n\n    bb6: {\n        StorageDead(_2);                 // scope 0 at /rustc/74c4821045c68d42bb8b8a7c998bdb5c2a72bd0d/library/alloc/src/macros.rs:55:9: 55:10\n        StorageLive(_8);                 // scope 1 at src/main.rs:3:5: 3:14\n        _8 = &mut _1;                    // scope 1 at src/main.rs:3:5: 3:14\n        _7 = Vec::<i32>::push(move _8, const 5_i32) -> [return: bb2, unwind: bb4]; // scope 1 at src/main.rs:3:5: 3:14\n                                         // mir::Constant\n                                         // + span: src/main.rs:3:7: 3:11\n                                         // + literal: Const { ty: for<'a> fn(&'a mut Vec<i32>, i32) {Vec::<i32>::push}, val: Value(<ZST>) }\n    }\n}", "fn main() {\n    add(3, 4);\n}\n\nfn foo(a: i32, b: i32) -> i32 {\n    if a > b { a + 1 } else { b + 1}\n}", "// WARNING: This output format is intended for human consumers only\n// and is subject to change without notice. Knock yourself out.\nfn main() -> () {\n    let mut _0: ();                      // return place in scope 0 at src/main.rs:1:11: 1:11\n    let _1: i32;                         // in scope 0 at src/main.rs:2:5: 2:14\n\n    bb0: {\n        _1 = foo(const 3_i32, const 4_i32) -> bb1; // scope 0 at src/main.rs:2:5: 2:14\n                                         // mir::Constant\n                                         // + span: src/main.rs:2:5: 2:8\n                                         // + literal: Const { ty: fn(i32, i32) -> i32 {foo}, val: Value(<ZST>) }\n    }\n\n    bb1: {\n        return;                          // scope 0 at src/main.rs:3:2: 3:2\n    }\n}\n\nfn foo(_1: i32, _2: i32) -> i32 {\n    debug a => _1;                       // in scope 0 at src/main.rs:5:8: 5:9\n    debug b => _2;                       // in scope 0 at src/main.rs:5:16: 5:17\n    let mut _0: i32;                     // return place in scope 0 at src/main.rs:5:27: 5:30\n    let mut _3: bool;                    // in scope 0 at src/main.rs:6:8: 6:13\n    let mut _4: (i32, bool);             // in scope 0 at src/main.rs:6:16: 6:21\n    let mut _5: (i32, bool);             // in scope 0 at src/main.rs:6:31: 6:36\n\n    bb0: {\n        _3 = Gt(_1, _2);                 // scope 0 at src/main.rs:6:8: 6:13\n        switchInt(move _3) -> [0: bb3, otherwise: bb1]; // scope 0 at src/main.rs:6:8: 6:13\n    }\n\n    bb1: {\n        _4 = CheckedAdd(_1, const 1_i32); // scope 0 at src/main.rs:6:16: 6:21\n        assert(!move (_4.1: bool), \"attempt to compute `{} + {}`, which would overflow\", _1, const 1_i32) -> bb2; // scope 0 at src/main.rs:6:16: 6:21\n    }\n\n    bb2: {\n        _0 = move (_4.0: i32);           // scope 0 at src/main.rs:6:16: 6:21\n        goto -> bb5;                     // scope 0 at src/main.rs:6:5: 6:37\n    }\n\n    bb3: {\n        _5 = CheckedAdd(_2, const 1_i32); // scope 0 at src/main.rs:6:31: 6:36\n        assert(!move (_5.1: bool), \"attempt to compute `{} + {}`, which would overflow\", _2, const 1_i32) -> bb4; // scope 0 at src/main.rs:6:31: 6:36\n    }\n\n    bb4: {\n        _0 = move (_5.0: i32);           // scope 0 at src/main.rs:6:31: 6:36\n        goto -> bb5;                     // scope 0 at src/main.rs:6:5: 6:37\n    }\n\n    bb5: {\n        return;                          // scope 0 at src/main.rs:7:2: 7:2\n    }\n}\n", "// WARNING: This output format is intended for human consumers only\n// and is subject to change without notice. Knock yourself out.\nfn main() -> () {\n    let mut _0: ();                      // return place in scope 0 at src/main.rs:1:11: 1:11\n    let _1: i32;                         // in scope 0 at src/main.rs:2:5: 2:14\n\n    bb0: {\n        StorageLive(_1);                 // scope 0 at src/main.rs:2:5: 2:14\n        _1 = foo(const 3_i32, const 4_i32) -> bb1; // scope 0 at src/main.rs:2:5: 2:14\n                                         // mir::Constant\n                                         // + span: src/main.rs:2:5: 2:8\n                                         // + literal: Const { ty: fn(i32, i32) -> i32 {foo}, val: Value(<ZST>) }\n    }\n\n    bb1: {\n        StorageDead(_1);                 // scope 0 at src/main.rs:2:14: 2:15\n        return;                          // scope 0 at src/main.rs:3:2: 3:2\n    }\n}\n\nfn foo(_1: i32, _2: i32) -> i32 {\n    debug a => _1;                       // in scope 0 at src/main.rs:5:8: 5:9\n    debug b => _2;                       // in scope 0 at src/main.rs:5:16: 5:17\n    let mut _0: i32;                     // return place in scope 0 at src/main.rs:5:27: 5:30\n    let mut _3: bool;                    // in scope 0 at src/main.rs:6:8: 6:13\n\n    bb0: {\n        StorageLive(_3);                 // scope 0 at src/main.rs:6:8: 6:13\n        _3 = Gt(_1, _2);                 // scope 0 at src/main.rs:6:8: 6:13\n        switchInt(move _3) -> [0: bb2, otherwise: bb1]; // scope 0 at src/main.rs:6:8: 6:13\n    }\n\n    bb1: {\n        _0 = Add(_1, const 1_i32);       // scope 0 at src/main.rs:6:16: 6:21\n        goto -> bb3;                     // scope 0 at src/main.rs:6:5: 6:37\n    }\n\n    bb2: {\n        _0 = Add(_2, const 1_i32);       // scope 0 at src/main.rs:6:31: 6:36\n        goto -> bb3;                     // scope 0 at src/main.rs:6:5: 6:37\n    }\n\n    bb3: {\n        StorageDead(_3);                 // scope 0 at src/main.rs:6:36: 6:37\n        return;                          // scope 0 at src/main.rs:7:2: 7:2\n    }\n}"];

function copy_code_to_clipboard(index) {
    navigator.clipboard.writeText(fenced_code_block_contents[index]);
}/*]]>*/</script>
        <a id="bottom"></a>
    </article>




    <footer class="markdown">
<p><br/></p><p><br/></p><hr/><div class="align-center"><p>2021 ~ 2023 &copy; Baehyunsol</p></div>
    </footer>


    <script src="colors.js"></script>

    
    <script src="nav.js"></script>
    
    
    
    <script src="header.js"></script>
    
<script src="tooltips.js"></script></body>

</html>